<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Mobility | NeST Digital</title>
	<atom:link href="https://nestdigital.com/tag/mobility/feed/" rel="self" type="application/rss+xml" />
	<link>https://nestdigital.com</link>
	<description>Exponential value creation by transforming your legacy Business, Customer and Operation models through Innovative Digital Technologies</description>
	<lastBuildDate>Sat, 12 Aug 2023 12:49:21 +0000</lastBuildDate>
	<language>en</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.3.1</generator>

<image>
	<url>https://nestdigital.com/wp-content/uploads/2023/08/Group-221.png</url>
	<title>Mobility | NeST Digital</title>
	<link>https://nestdigital.com</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>“Will that charging gun fit my electric car!”</title>
		<link>https://nestdigital.com/blogs/will-that-charging-gun-fit-my-electric-car/</link>
					<comments>https://nestdigital.com/blogs/will-that-charging-gun-fit-my-electric-car/#respond</comments>
		
		<dc:creator><![CDATA[Ram Mohan Ramakrishnan]]></dc:creator>
		<pubDate>Tue, 25 Jul 2023 17:16:55 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4533</guid>

					<description><![CDATA[Abstract EV charging standards assure electric car (EV) users of compatibility with EV Chargers (EVSEs). The landscape of EV charging standards is fragmented with no single global standard. Regional associations and industry leaders have defined their respective standards so far, which were promoted by regulatory legislations for specific geographies. Compliance from both EV OEMs as [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<h2 class="wp-block-heading" id="ea8b"><strong>Abstract</strong></h2>



<p id="5ed3">EV charging standards assure electric car (EV) users of compatibility with EV Chargers (EVSEs). The landscape of EV charging standards is fragmented with no single global standard. Regional associations and industry leaders have defined their respective standards so far, which were promoted by regulatory legislations for specific geographies. Compliance from both EV OEMs as well as EV Charger manufacturers is a must to make compatibility a reality. An EV charging standard is not a single standard, rather it is an umbrella of multiple constituent standards dealing with various aspects of EV charging. Each EV charging standard has tried to consolidate in its home ground while attempting to penetrate overseas markets, incorporating the latest developments in EV charging in order to remain competitive.</p>



<h2 class="wp-block-heading" id="585f"><strong>Introduction</strong></h2>



<p id="78b0">Thinking of switching over to an electric car? Well, do you drive long distances on business or holiday? If so, then one of your first concerns will be about recharging midway from public charging stations. So, is the EV model you are considering compatible with those charging stations (or vice versa)? With your petrol/diesel car, you are fully confident that the nozzle of any fuel station in the country will fit into your tank’s inlet, no matter the choice of fuel grade. With your new electric car however, will the charging gun of every installed public charging station fit into its charging inlet and work safely and correctly?</p>



<h2 class="wp-block-heading" id="f268"><strong>EV charging compatibility</strong></h2>



<p id="4fa9">For charging any battery, ranging from a UPS battery to a cell phone battery, the input electrical parameters depend on the country-specific grid standard. For instance, 230V/1-Phase or 400V/3-Phase and 50 Hz in India. Whereas the output parameters will be specific to the battery design. More or less similarly, the EV charging standard adopted by a particular country ensures that all EVs manufactured for use in that region are compatible with public chargers installed there. So, the short answer to the concern is that if your EV is locally manufactured, then you can be reasonably assured that it will be compatible with the locally installed public chargers.</p>



<p id="d8ce">However, when it comes to an imported EV it turns out to be fuzzy! For instance, if you plan to import a made-in-Japan EV, are you sure it can be charged from public chargers in India? What about a Chinese import? Well, it looks like the answers are not in black or white! So, let’s try to understand the WHYs and HOWs of EV — EVSE compatibility. (Where EVSE stands for Electric Vehicle Supply Equipment, or the EV charger).</p>



<h2 class="wp-block-heading" id="663d"><strong>Compatibility requirements</strong></h2>



<p id="360a">Firstly, when we talk of public charging, we are referring for the most part to DC Fast charging. Public charging does include DC Ultra-fast charging as well, although uptake is still to happen in countries like India. In DC Fast charging the output DC voltage is typically 500V, providing power output of typically 150kW, whereas for DC Ultra-fast charging it is typically 800V and upward of 300kW. The input parameters (for both types) depend on the grid standard adopted in India as mentioned above.</p>



<p id="1500">However, EV–EVSE compatibility is not limited to interoperability of voltage and power, it also involves compatibility at various levels between the car and the EV Charger — mechanical (connector dimensions, pinout), max. electrical ratings, EV-EVSE communication, thermal management, safety etc. Most importantly, compliance from both EV OEMs as well as EV Charger manufacturers is a must to make compatibility a reality. For instance, an electric car manufactured by Tata Motors should be compatible with a DC Fast charger design from Delta Electronics, or a charging station installed by Exicom should be compatible with an electric tractor manufactured by TAFE.</p>



<h2 class="wp-block-heading" id="e3bc"><strong>Standardization of EV Charging</strong></h2>



<p id="6f13">The Automotive Research Association of India (ARAI) is the vanguard in India that governs compatibility by publishing standards and guidelines and enforces them through compliance testing and certification services, for both EVs as well as EVSEs in the country. The Automotive Industry Standard AIS-138 (Part-2) is the ARAI standard for DC Fast charging, which extensively cross references global standards, like IEC 61851 for basic conductive charging system and its electrical/safety aspects and analog signalling, DIN SPEC 70121 and ISO 15118 for high level communication and other related European standards for connectors etc. ARAI also publishes Automotive Industry Standard AIS-038 for the construction and functional safety of Electric Power Train vehicles, as well as defines the type qualification tests for all categories of EVs besides laying down guidance for the measurement of power output, electrical energy consumption and range of EVs.</p>



<p id="7394"><strong>Note</strong>: The scope of ARAI extends not only into other areas of EV and EVSE, like hybrid electric vehicles and AC charging, but also into fossil fuel vehicles as well.</p>



<h2 class="wp-block-heading" id="08c6"><strong>Global EV charging standards</strong></h2>



<p id="5ce4">At the global stage, a single standard to govern EV–EVSE compatibility has always remained elusive, and is likely to remain a utopian dream. Just as electrical systems around the world are fragmented (and finitely so), so are EV charging standards. As of today, the Combined Charging System (CCS) with its 2 variants CCS1 (US) and CCS2 (Europe), CHAdeMO (Japan), GB/T (China) and Tesla are the global EV charging standards.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*t5FlJmBFym6ZNGnZ2T0fEA.png" alt=""/><figcaption class="wp-element-caption"><strong>Global EV charging standards and geographies&nbsp;</strong>(Image courtesy: Science Direct)</figcaption></figure>



<h2 class="wp-block-heading" id="f3b8"><strong>War of the plugs!</strong></h2>



<p id="163a">A glance at the charging connector, one of the many aspects of an EV charging standard, gives a sense of wide variations across competing standards.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*Dyepw0OdJXQOSe2_0zB9SA.png" alt=""/><figcaption class="wp-element-caption"><strong>Charging connectors of global EV charging standards&nbsp;</strong>(Image courtesy: Renhotec EV)</figcaption></figure>



<p id="95af"><strong>Note</strong>: The connector layout and pin arrangement at the outlet/gun of the EV Charger and that at the inlet of the car are mirror images of one another.</p>



<p id="daeb"><strong>Evolution of EV charging standards</strong></p>



<p id="4ca6">Let us trace briefly the history of EV charging standards.</p>



<h2 class="wp-block-heading" id="3373"><strong>CHAdeMO</strong></h2>



<p id="4285">The CHAdeMO association in Japan were the first movers in 2010 for a standardized fast charging system for battery electric vehicles. It was formed by the Tokyo Electric Power Company and a few Japanese automakers — Toyota, Nissan, Mitsubishi, Subaru, Hitachi, Honda and Panasonic. Although not all at the same time, they agreed on a proprietary CAN (Controller Area Network) based protocol for the communication between the car and the EV Charger. Since then CHAdeMO has seen widespread deployment in Japan.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*ILzybU5MGUe2fqn1PE421w.jpeg" alt=""/><figcaption class="wp-element-caption"><strong>Charging inlet of Nissan Leaf EV (for use in Japan only), showing the CHAdeMO connector&nbsp;</strong>(Image courtesy: Wikimedia Commons)</figcaption></figure>



<p id="de24">Soon CHAdeMO’s success travelled beyond the Japanese archipelago as it gained the status of an international standard in 2014, following which it found traction in international markets, like North America and Europe. Over 50+ CHAdeMO manufacturers have an installed base of public fast chargers across 60+ countries. Various models from BMW, Mitsubishi, Mazda, Citroen, Lexus, Nissan, Peugeot, Subaru, Toyota and Tesla support (or used to support at some point of time) CHAdeMO as a standard or optional inlet.</p>



<p id="f619"><strong>Note</strong>: “CHAdeMO” was coined as an abbreviation of “CHArge de MOve”, equivalent to “charge for moving”, and is a pun for “O cha demo ikaga desuka” in Japanese, which means “Let’s have a tea while charging”, which really symbolized fast charging at that time!</p>



<p id="b5a7">However, CHAdeMO had a major setback when the Combined Charging System was designated by the European Commission as the standard for public fast charging in Europe. EU regulations did not mandate removing or phasing out CHAdeMO, it only directed that all public chargers in the EU were to be equipped with CCS2 Combo connector. This allowed charger manufacturers to have multiple connector options in the charger, including CHAdeMO.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*gjgW7AoOHDHEFj8hfI_1jA.jpeg" alt=""/><figcaption class="wp-element-caption"><strong>Charging inlet of Nissan Leaf EV (US version) Shows additional CCS Type1 connector for AC charging, in addition to CHAdeMO connector for DC charging&nbsp;</strong>(Image courtesy: The Tech)</figcaption></figure>



<p id="1d30">More precisely, the technical specifications (Annex II) of the EU directive on the development of infrastructure for Alternative Fuels of 2014 states that “Direct current (DC) high power recharging points for electric vehicles shall be equipped as of 2017, for interoperability purposes, at least with connectors of the Combined Charging System ‘Combo 2’ as described in standard IEC 62196–3.”, that defines the dimensional compatibility and interchangeability requirements of specific designs of plugs, socket-outlets, vehicle connectors and vehicle inlets related to public charging. This is the piece of EU legislation that launched CCS as the predominant standard in Europe, and later in other parts of the world like the US where the Society of Automotive Engineers (SAE) welcomed CCS as an obvious extension to the existing AC charging standard.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*MR87wsybkb4nF8FtJVIDGg.jpeg" alt=""/><figcaption class="wp-element-caption"><strong>Charging inlet of Nissan Leaf EV (EU version) Shows additional CCS Type2 connector for AC charging, in addition to CHAdeMO connector for DC charging&nbsp;</strong>(Image courtesy: TeslaClub)</figcaption></figure>



<p id="088c">These developments led to CHAdeMO steadily losing market share, with even some of its association members like Honda and Nissan ditching CHAdeMO connectors on their models sold outside Japan. Nevertheless, CHAdeMO still remains the predominant EV charging standard in Japan.</p>



<h2 class="wp-block-heading" id="7a57"><strong>Combined Charging System (CCS)</strong></h2>



<p id="ee75">The Combined Charging System (CCS) standard was introduced in 2012 by seven European and North American auto makers — Audi, BMW, Daimler, Ford, General Motors, Porsche and Volkswagen. At that time the ISO15118 standard that defined use of the HomePlug GreenPHY protocol (based on Power Line Communication) wasn’t fully ready for release. So, in the interim, CCS chose the German standard DIN SPEC 70121 (that used a similar protocol) for high level communication between the car and the EV Charger. Subsequently ISO15118 was adopted by CCS when it was released in 2014 to supersede DIN SPEC 70121 as the high-level communication standard. Later CCS came under the governance of the CharIN (Charging Interface Initiative e.V.) association which today consists of more than 300 members dedicated to promoting interoperability based on CCS.</p>



<h2 class="wp-block-heading" id="9396"><strong>CCS Type1 (and Combo1)</strong></h2>



<p id="2c69">CCS Type 1 (and Combo 1) connectors gained popularity in North America (120 V system), soon finding traction in Taiwan and South Korea.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*j_Ev0Le8jt6_b6aTUtTs6w.png" alt=""/><figcaption class="wp-element-caption"><strong>Charging gun/inlet of General Motors EV (unknown model), showing CCS Combo1 connector&nbsp;</strong>(Image courtesy: AutocarPro)</figcaption></figure>



<h2 class="wp-block-heading" id="bd50"><strong>CCS Type2 (and Combo2)</strong></h2>



<p id="2458">While CCS Type 2 (and Combo 2) connectors became widespread in Europe (240 V system), followed by other geographies like South America, South Africa, India, Singapore and Australia.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*TEdTV1jlrFL4u_NlNBVhJg.png" alt=""/><figcaption class="wp-element-caption"><strong>Charging gun/inlet of Renault Zoe EV, showing CCS Combo2 connector&nbsp;</strong>(Image courtesy: Renault)</figcaption></figure>



<p id="bdd4">Meanwhile on the public charging infrastructure front, CCS charger installations have outnumbered CHAdeMO chargers in the US as of 2020.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:470/1*HU_bNq85nSaAdIXmacHIQw.png" alt=""/><figcaption class="wp-element-caption"><strong>ABB Terra 54 CJG DC Fast Charger, with multiple charging gun options — CHAdeMO, CCS2 and AC charging&nbsp;</strong>(Image courtesy: ABB)</figcaption></figure>



<h2 class="wp-block-heading" id="1d42"><strong>CHAdeMO</strong></h2>



<p id="e1e6">We saw earlier how CHAdeMO lost its foothold in Europe with the EU directive, and later in the US. However, it is to be appreciated how CHAdeMO was retained by CCS as an option for manufacturers. The IEC 61851 standard that was adopted by CCS had made provision for 3 alternative options for digital communication:</p>



<p id="f34e">· System A — CAN bus A interface, defined by IEC 61851–24, for CHAdeMO</p>



<p id="9927">· System B — CAN bus B interface, defined by the GB/T 27930, for GB/T</p>



<p id="46bc">· System C — Power Line Communication (PLC), defined by ISO15118, for CCS</p>



<p id="a3c2">In this non-exclusivity of communication options, we can see CCS as kind of grandfathering CHAdeMO, perhaps to honour the already installed base of CHAdeMO chargers and compatible cars in the EU. Nevertheless, CHAdeMO was unable to withstand the market forces in the EU and the US, and is being relegated to its home turf of Japan.</p>



<h2 class="wp-block-heading" id="4e1c"><strong>GB/T</strong></h2>



<p id="077b">GB/T charging standard was developed in China led by the China Electricity Council, and is largely limited to the Chinese market, incidentally the largest EV market.</p>



<h2 class="wp-block-heading" id="54bf"><strong>Tesla</strong></h2>



<p id="a2e7">Anything that is proprietary is hardly a standard, so “Tesla standard” may turn out to be an oxymoron! Although not an open standard, let’s look at the Tesla connector as well for completeness sake.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:618/1*N3tThtvgw4xv0fH0qZnIwA.png" alt=""/><figcaption class="wp-element-caption"><strong>Tesla EV Charger (gun) connector&nbsp;</strong>(Image courtesy: Connector Tips)</figcaption></figure>



<p id="2c15">Don’t worry, it is not an ET from Star Wars! It is only Tesla’s proprietary connector design.</p>



<p id="faf4">Even Tesla has had to pivot to provide CCS2 charging outlets in their Superchargers installed in Europe, and also provide (separately sold) CCS2 adapter for their cars sold in the EU. (Does this remind of Apple having to provide USB Type-C slot on iPhones sold in Europe!) Tesla EVs have accommodated the CCS2 connector in the inlet alongside the proprietary Tesla connector, so that owners can leverage the vast CCS2 public charging infrastructure in the EU that is far denser than the installed base of Tesla Superchargers.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1056/1*O3IXMHbC2Wgw0Q3GipyTyw.png" alt=""/><figcaption class="wp-element-caption"><strong>Updated Tesla Model S EV charging inlet Shows CCS2 connector in addition to Tesla proprietary connector&nbsp;</strong>(Image courtesy: Electrek)</figcaption></figure>



<h2 class="wp-block-heading" id="263a"><strong>CCS — What’s under the hood?</strong></h2>



<p id="773a">Let’s look in some detail into the Combined Charging System (CCS) standard. Why choose this particular standard for deep dive? From the above discussion and pictures, it is evident that competing standards like CHAdeMO and Tesla are making space for CCS to retain their market share. Further although it originally became popular in Europe, CCS2 was adopted subsequently by many other countries, including India and is arguably the most prevalent global standard today.</p>



<p id="7cd8">CCS is an open, universal and international charging system for electric vehicles based on international standards — one system for all. It combines single phase and three phase AC charging, along with Fast DC charging (most important for public charging). It is a combination of hardware and software, that ranges from defining the connector, managing of the control functions and the charging communication between the electric vehicle and the charging infrastructure.</p>



<p id="4354">The basic electrical interface specification for power transmission that includes safety aspects like charging socket lock and safety-related (analog) signalling is defined by IEC61851. Connector dimensions and electrical ratings follow the IEC 62196 standard. Since the original Type 2 connector design was made by the manufacturer Mennekes (Germany), it is also colloquially known as the Mennekes connector. Further CCS introduced the Combo2 connector that combines pins for both AC charging and DC charging in Europe.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1328/1*T_I6cG3JiUlwc6UG3cEzoQ.png" alt=""/><figcaption class="wp-element-caption"><strong>Peugeot EV (unknown model) charging inlet with CCS Combo 2 connector. Note the 2 DC pins covered by the closed lower cap&nbsp;</strong>(Image courtesy: ZapMap)</figcaption></figure>



<p id="e679">While in the US, the Type 1 connector is popularly known as the SAE J1772 connector. Further CCS introduced the Combo1 connector that combines pins for both AC charging and DC charging in the US.</p>



<p id="2e65">High Level Communication uses the standards ISO 15118 and DIN SPEC 70121 (now obsolete). The communication uses TCP/IP channel based on HomePlug GreenPHY (Power Line Communication), protected by TLS security that offers better security for encrypted authentication and secure payment, compared to the CAN bus communication adopted by CHAdeMO and GB/T standards.</p>



<p id="2c91">CCS has been continuously evolving and adoption the latest trends in EV charging — smart charging, plug-n-charge, bidirectional charging (vehicle to grid), wireless (inductive) charging, automatic connection device (robotic arms and pantographs). A working group at CharIN is also working on Extended High Power (or MegaWatt) charging connector for speciality EVs like trucks and buses that can take multiple MW of charging power.</p>



<h2 class="wp-block-heading" id="a9b2"><strong>Compatible or not</strong></h2>



<p id="18db">At SFO Technologies (the flagship company of NeST group), our EV Charger designs conform to CCS2 standard to address both the Indian and European markets. The shortly upcoming ARAI testing and certification activity will ensure that any compatible electric (or hybrid) car, like a Tata Nexon EV or a Hyundai Kona EV, can be safely plugged into it and charged.</p>



<p id="7018">Meanwhile, let us see if we have the answer to the compatibility questions regarding imported EVs. Well, it turns out that if it is a Japanese make EV model that was manufactured for use in Japan only, it will have only the CHAdeMO connector in the inlet, so it cannot be charged from CCS2 public charging stations in India. However, if it is a model that was manufactured for the international market like the EU, then it will additionally have a CCS2 connector in the inlet, which means it can be used in India. Whereas in the case of the imported Chinese EV, one tends to think that since it will have only GB/T inlet, it cannot be charged in India. Quite counterintuitively, DC Fast chargers with GB/T gun option (and CAN based communication) are manufactured and installed in India, although they are few in number!</p>



<h2 class="wp-block-heading" id="8f2a"><strong>Standardization trends</strong></h2>



<p id="5bb0">From the above discussion, we can see that an EV charging standard is not really a single self-contained standard, rather it is an umbrella of multiple constituent standards, each one dealing with a particular aspect of EV charging — connector definition, electrical parameters, communication system and safety features, that has been adopted by legislation by policy makers of the respective geography.</p>



<p id="a93d">For the same reason and owing to their history of evolution, the standardization landscape is not expected to change drastically in the next 3–5 years. China the largest EV market today will continue to promote GB/T, whereas the rest of the world will resist adopting it. Meanwhile CCS2 will continue its predominance in Europe, and consolidate in India and other geographies and try to further expand its footprint. The US will continue with a mixture of CCS1 and CHAdeMO till the time the latter gets fully phased out, not by legislation though. This shift could spur some aftermarket action for CCS-2 retrofit kits for existing CHAdeMO cars, as well as smart CCS2-CHAdeMO charging adapters. CHAdeMO will lose further market share in both the US and the EU and eventually be relegated to the Japanese market only.</p>



<p id="31ea">However, this hardly means that the landscape will remain static. Firstly, many changes are expected to happen with each global standard, with each of them continuing to incorporate new and emerging sub-standards related to smart charging, bidirectional charging, wireless charging, automatic connection device etc. On a different dimension, cooperation between erstwhile competitors is also happening. The China Electricity Council and the CHAdeMO Association of Japan are collaborating on an ambitious EV charging standardization project for ultra-fast charging, that has “CHaoJi” as it working name. This new global standard released in 2020 is believed to be backward compatible with the existing GB/T (Chinese) and CHAdeMO (Japanese) standards. So, the arena of EV charging standards promises to be action packed!</p>



<p id="1828"><strong>Conclusion</strong></p>



<p id="4437">As electrification gains momentum in the coming years to help governments achieve their global climate commitments, several new features for Smart Charging and grid-friendliness are expected to be incorporated into all major EV Charging standards. Both EV OEMs as well as EV Charger manufacturers will need to closely follow the changes in the latest releases of the standards to assure compatibility and retain/gain their market share.</p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/will-that-charging-gun-fit-my-electric-car/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>“Hello Mr. EV Charger, I’m a flat car battery!” (Part-2)</title>
		<link>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-2/</link>
					<comments>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-2/#respond</comments>
		
		<dc:creator><![CDATA[Ram Mohan Ramakrishnan]]></dc:creator>
		<pubDate>Tue, 25 Jul 2023 17:11:24 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4529</guid>

					<description><![CDATA[Abstract By enabling interoperability, EV Charging standards ensure that EV owners can charge their cars from any compatible EV Charger. The IEC 61851 standard defines Analog Signalling that ensures electrical safety and facilitates basic communication between the EV Charger and the car. Basic communication includes features such as plug-in detection and readiness to charge. The [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<h2 class="wp-block-heading" id="f97d"><strong>Abstract</strong></h2>



<p id="79d6">By enabling interoperability, EV Charging standards ensure that EV owners can charge their cars from any compatible EV Charger. The IEC 61851 standard defines Analog Signalling that ensures electrical safety and facilitates basic communication between the EV Charger and the car. Basic communication includes features such as plug-in detection and readiness to charge. The Combined Charging System 2 includes real-time digital communication over Power Line Communication (PLC), also known as High-Level Communication, which is defined by the ISO 15118 standard. This forms a complete e-Mobility communication system for EV Charging. It ensures that the charging requirements, capabilities and limitations of both the EV Charger and the car are understood and synchronized throughout the charging session. During the charging session, the EV Charger communicates with the car using High-Level Communication. This enables the EV Charger to pass information about the car to backend Charging Management Software (CMS) over the Open Charge Point Protocol (OCPP).</p>



<h2 class="wp-block-heading" id="f2a0"><strong>Introduction</strong></h2>



<p id="4f3d">How does an EV Charger know how much energy to pump into a car battery? How does it know that the battery is flat currently so it needs to be charged at maximum current? How does the EV Charger know the time of departure desired by the user? And how does it correctly display the remaining time to charge?</p>



<h2 class="wp-block-heading" id="b30e"><strong>Recap</strong></h2>



<p id="d687">Welcome back to the world of EVSE-EV communications. In the previous (first) part of this article, we discussed the 2 types of communication between the EV Charger and the car. In the Combined Charging 2 system, these are:</p>



<p id="3ac8">1. Analog Signalling (<strong>AS</strong>), defined by the IEC 61851 standard (the successor of the US SAE J1772)<br>2. High-Level Communication (<strong>HLC</strong>), defined by the ISO 15118 standard (the successor of the German DIN SPEC 70121)</p>



<p id="8949">In the previous (first) part, we had deep dived into AS. In this (second) part, we take a closer look at how HLC works, and how it is related to AS.</p>



<h2 class="wp-block-heading" id="a05a"><strong>Why HLC?</strong></h2>



<p id="3298">So, if AS already serves the purpose of handshaking between the EV Charger and the car regarding plug in events, the readiness for charging and negotiation of charging current for the session, then why is HLC required? Are there any features provided by HLC over and above AS?</p>



<p id="6ab6">The short answer is Yes. HLC enables enhanced features, like the exchange of charging parameters between the car and the EV Charger. Like the requested energy and charging current, as well as information like state of charge (SoC) of the battery, remaining time to charge etc. It also opens up the possibility for the Charging Operator to operate a Cloud based (*) billing and payment system that is critical for public charging infrastructure.</p>



<p id="ab83">(*) Cloud — Most modern EV Chargers are connected to the Cloud, where a Charging Management Software (CMS), that is owned and operated by the Charging Operator, provides high level services like authorization, billing and payment. The CMS links up all EV Chargers under the same operator. Communication between the EV Charger and the CMS uses the Open Charge Point Protocol (OCPP), which is a TCP/IP based de-facto standard led by Charge Point, USA.</p>



<h2 class="wp-block-heading" id="218b"><strong>HLC Standards</strong></h2>



<p id="f4ab">HLC standards for EV Charging were pioneered by the Japanese with their CHAdeMO system. In Europe, the Germans introduced HLC in the CCS2 system with the DIN SPEC 70121 in 2012, that was an interim standard for DC Chargers. However, it did not support AC Charging, Plug &amp; Charge or Smart Charging features. The German standard was later superseded by the ISO 15118 standard in 2014, that covers both DC Chargers and AC Chargers and includes Plug &amp; Charge and Smart Charging enhancements. The CCS2 system that India has adopted is the most prevalent system in Europe.</p>



<p id="6674">HLC offers several enhancements over AS, including Smart Charging and Automated Authentication and Authorization mechanisms. Smart Charging allows for cost effective AC or DC charging by scheduling the charging operation during off-peak hours and considering the availability of renewable energy in the grid. It can also optimize charging based on the battery’s State of Health (SoH) and is useful for fleet charging scenarios for balancing power provision. Additionally, HLC allows for quick re-negotiation of charging schedules between the EV Charger and the car in response to unforeseen changes in the grid.</p>



<p id="754f">Automated Authentication and Authorization (A&amp;A) mechanisms in HLC can be achieved using External Identification Means (EIM), such as an RFID card or QR code scan from a mobile app with multiple options for spot payment. Alternatively, A&amp;A could be achieved using secure Plug &amp; Charge (PnC), where an E-Mobility contract is signed with the Charging Operator. Digital XML signatures &amp; Digital Certificates installed in the car use TLS security, and the car only needs to be plugged in for the user to be authorized and for automated billing and payment at the backend.</p>



<h2 class="wp-block-heading" id="8f46"><strong>Communicating end points</strong></h2>



<p id="1138">As for any data communication, at least 2 entities are required for HLC — the EV Charger and the car. Although EV Chargers with multiple charging guns presents a 1-to-many relationship with only one EV Charger and multiple cars, we will consider only the 1-to-1 case for simplicity sake.</p>



<p id="1976">In HLC defined by ISO 15118, the communicating end point inside the EV Charger side is called Supply Equipment Communication Controller (SECC) and its counterpart inside the car is called Electric Vehicle Communication Controller (EVCC).</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*W33JNv_6ky7rxSCuPQErtg.png" alt=""/><figcaption class="wp-element-caption">Communicating end points in HLC</figcaption></figure>



<p id="3033">So, although loosely saying that the EV Charger and the car participate in HLC is not incorrect, it would be technically accurate to say that the SECC (in the EV Charger) and the EVCC (in the car) participate in HLC.</p>



<h2 class="wp-block-heading" id="ca9a"><strong>Data communication model</strong></h2>



<p id="a399">The SECC (in the EV Charger) and the EVCC (in the car) establish a data communication network by establishing the 7 functional layers as outlined in the well-established ISO/OSI data communication model. As per the model, each layer builds upon the functionality that is provided by the underlying layers, starting with the physical layer at the bottom all the way up to the application layer at the top.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*_Q07PzqOEADjJAWmaemATg.png" alt=""/><figcaption class="wp-element-caption">ISO/OSI data communication model (Diagram courtesy: Tesla)</figcaption></figure>



<h2 class="wp-block-heading" id="578c"><strong>Layers 1 &amp; 2</strong></h2>



<p id="4d85">The physical and data link layers are implemented as per Part-3 of ISO 15118 using Power Line Communication (PLC), that typically uses a HomePlug Green PHY (IEEE1901) modem. At the physical layer (layer 1) the modems at both ends connect to the same physical line of the Control Pilot (CP), over which a high frequency carrier in the 1.8MHz to 30MHz range is transmitted. The carrier wave is modulated with the HLC message data packets, achieving a maximum data rate of 10Mbps.</p>



<p id="23bf">The CP line therefore is multiplexed across the 2 modes of communication, as follows:<br>1) AS: +12V/-12V 1000Hz square wave (between the IEC 61851 compliant circuitry at both ends)<br>2) HLC: 1.8MHz to 30MHz PLC carrier wave, modulated with data message packets (between the SECC and EVCC as per ISO 15118)</p>



<p id="cb44">The media access/data link layer (layer 2) is managed by the Signal Level Attenuation Characteristic (SLAC) protocol as defined by the HomePlug Green PHY v.1.1.1 specification. SLAC is designed for automotive applications, where multiple EVs could connected simultaneously to an EV Charger. The carrier signal’s attenuation level from each car is measured at the EV Charger during the Association Procedure in order to uniquely determine the identity of the cars. Security is optionally added using public key signature.</p>



<p id="7874">The layer 2 SLAC protocol stack is typically provided by HomePlug Green PHY compliant silicon vendors, like Qualcomm. SLAC sets up a reliable and secure frame transfer mechanism between the 2 nodes over the physical medium, guaranteeing error free transfers. During the SLAC initialization procedure, the PLC modem at the SECC (in the EV Charger) and EVCC (in the car) get unique MAC addresses. After the SLAC handshake is successful, the PLC modems at the SECC and the EVCC form a logical network.</p>



<h2 class="wp-block-heading" id="666f"><strong>Layers 3 &amp; 4</strong></h2>



<p id="221f">The network layer (layer 3) is an IPv6 stack that layers over the MAC address. DHCP is used for host configuration and ICMPv6 to send network layer error messages. Each node therefore gets an IPv6 address. The transport layer (layer 4) stacks — TCP (reliable), UDP (fast), and optionally Transport Layer Security/TLS (safe) get layered on top of the IPv6 (layer3) stack. TCP provides flow control, congestion control and triggers retransmissions upon error conditions for guaranteed delivery.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*eauSnfexxc4O3r67hvAzbA.png" alt=""/><figcaption class="wp-element-caption">Applicability of the different Parts of ISO 15118 to the 7-layered V2G Protocol Stack (Diagram courtesy: Tesla, Switch)</figcaption></figure>



<h2 class="wp-block-heading" id="9178"><strong>Layers 5, 6 &amp; 7</strong></h2>



<p id="2754">The V2G Transfer Protocol (V2GTP) is (layer 5/session) layered over the transport layer for session management between the EV Charger (also called “grid side” **) and the car. The presentation layer (layer 6) consists of encoding and decoding between application (XML) format and network Efficient XML Interchange (W3C EXI 1.0) format and negotiating/establishing an application layer protocol along with version number. The application (layer 7) V2G messages that have specific meanings in the context of the charging process/session are communicated between the SECC (in the EV Charger) and the EVCC (in the car) utilizing the completed layers of the underlying protocol stack. Domain Name Service (DNS) and SECC Discovery Protocol (SDP) protocols at layer 7 help resolve addresses and discover the SECC respectively. V2G stacks that implement layer 3 to layer 7 are available as open source as well as proprietary.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*xEXy4yYp3NxZ1Ug_HUIFdg.png" alt=""/><figcaption class="wp-element-caption">Data packet format, with layer-wise headers (Diagram courtesy: Tesla)</figcaption></figure>



<p id="fc04">Like every layered communication model, each layer adds its own header to the original payload received from its upper layers during transmission. Vice versa during reception — each layer strips off its header before passing on the payload to its upper layers. Now, doesn’t the above description, layering and packet diagram look very familiar!</p>



<p id="9658">Before diving deeper into HLC, let us first examine how it is related to AS.</p>



<h2 class="wp-block-heading" id="5ea5"><strong>Close relationship — HLC and AS</strong></h2>



<p id="d84e">The lifecycle of a charging session involving the EV Charger and the car consists of the following state sequences, that are managed together by AS and HLC.</p>



<p id="48a9">· Unmated — EV not yet connected (State-A)</p>



<p id="52d5">· Mated — EV detected, not ready to charge (State-B)</p>



<p id="fe16">· Initialize — EV detected, ready to charge (State-C), Initialize HLC</p>



<p id="8a41">· Cable check — Connector is locked on the car side for safe DC Charging</p>



<p id="1382">· Pre-charge — Adjust EV Charger’s output voltage to the car’s battery voltage</p>



<p id="c8ea">· Charge — Control actual power transfer</p>



<p id="62a1">· Power down — EV still detected, but no longer ready to charge (State-B)</p>



<p id="dfd2">· Unmated — EV no longer connected (State-A)</p>



<p id="071e">IEC 61851 that defines AS describes different modes of charging, as follows with the last section in bold of special interest to us:</p>



<ul>
<li>Charging Mode 1 — AC charging from mains over standard 1phase/3phase sockets. Up to 16 A and 250/480 V. No protection device in the charging cable.</li>



<li>Charging Mode 2 — AC charging from mains over standard 1phase/3phase sockets. Up to 32 A and 250/480 V. Protection device integrated in the charging cable.</li>



<li>Charging Mode 3 — AC charging using dedicated AC charging stations. Mandatory PWM signalling and optional High-Level Communication (HLC)</li>



<li><strong>Charging Mode 4 — DC charging using dedicated DC charging stations. Mandatory PWM signalling and mandatory High-Level Communication (HLC)</strong></li>
</ul>



<p id="7dc2">We can see that mode 4 is the charging mode for DC charging from a DC Charging Station using mandatory AS and mandatory HLC.</p>



<p id="0738">IEC 61851 further classifies the Charging mode 4 (above) into 3 systems, as follows with the last section in bold of special interest to us.</p>



<ul>
<li>System A — The physical/data layer is CAN bus A interface. The application layer is defined by IEC 61851–24. (This is used in CHAdeMO system)</li>



<li>System B — The physical/data layer is CAN bus B interface. The application layer is defined by the GB/T 27930 standard. (This is used in the Chinese system)</li>



<li><strong>System C — The physical/data layer is Power Line Communication (PLC). The application layer is defined by the ISO 15118 protocol. (This is used in the CCS2 system)</strong></li>
</ul>



<p id="b24f">We can see that in System C which has been adopted by the CCS2 system, ISO 15118 specifies the usage of Power Line Communication (PLC) for HLC. We can therefore think of IEC 61851 as the “mother” standard that defines the context and the need for ISO 15118 as the “daughter” standard. Needless to say that mother historically precedes daughter.</p>



<h2 class="wp-block-heading" id="5b80"><strong>Initiating HLC</strong></h2>



<p id="ff45">We saw in the previous (first) part how the AS session is initiated by electrically detecting the event of plugging in the car to the EV Charger. So how is the HLC session initiated? Well, it turns out that it is AS itself that initiates HLC! Let us see how.</p>



<p id="a0ac">We had seen that the valid range of PWM duty cycle between the EV Charger and the car is between 10% and 96%. Why these figures, precisely? At 96% duty cycle, we hit the maximum current of 80A as defined by IEC 61851. And at 10%, we are at 6A which is the lowest current rating of any common domestic power outlet. That should have meant that any value of the duty cycle less than 10% (or greater than 96%) should have been invalid. But no! They chose a special value of 5% duty cycle for a very special purpose — to signal the need for HLC.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*X-Vn4jdisvdGm6xhfru6Yw.png" alt=""/><figcaption class="wp-element-caption">The 5% duty cycle waveform in AS, that triggers HLC</figcaption></figure>



<p id="40d9">Hence if the duty cycle is set to 5% in AS, then it is an indication that additional HLC is required. In practice, there is a small tolerance around the 5%, so actual duty cycles could vary between 3% and 7%.</p>



<p id="0c34">So, while the Control Pilot (CP) and Protective Earth (PE) lines of the EV Charger and the car are connected (mated), and when a 5% duty cycle square wave is detected, it causes the HomePlug Green PHY modems at the SECC (EV Charger) and the EVCC (car) to establish a physical link over the 1.8MHz-30MHz carrier wave signal, thereby establishing layer-1 of the HLC protocol. What an ingenious way to electrically initiate the transition to setup a data communication stack!</p>



<h2 class="wp-block-heading" id="c628"><strong>Just a trigger, not a participant</strong></h2>



<p id="122a">It may be worth clarifying here that although AS is responsible for triggering HLC by issuing the 5% duty cycle square waveform on the CP line, once HLC is established between the EV Charger and the car over PLC, AS has no role to play in the data communication session. Like a mother marrying off her daughter and letting her live by herself! Which means that AS is totally transparent to the SECC and EVCC in the context of digital communication, and is separately handled by the EVSE controller (on the EV Charger) and the base controller (on the car), both of which implement the IEC 61851 protocol.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*1JoZLiSNxNq-3e_pCMBmkQ.png" alt=""/><figcaption class="wp-element-caption">Multiplexing physical lines across AS and HLC modes</figcaption></figure>



<p id="488c">SECC (EV Charger) and EVCC (car) are involved only in HLC over PLC carrier wave. They are not involved in AS, although the same physical lines of CP and PE are shared between the 2 modes. Like the mother and the married daughter still share their family car for shopping together, but keep their bags separate! AS is handled through discrete voltage levels and square wave PWM by means of separate analogue circuitry on the EV Charger side (also called “grid side” **) and in the car, as per IEC 61851, as we saw in the previous (first) part of this article.</p>



<p id="3dd8">(**)”grid side” : Now we know why HLC is also commonly known as V2G (Vehicle-to-Grid), and in some instances V2H (Vehicle-to-Home). For the car, the EV Charger represents the front end to the home or/and the grid.</p>



<h2 class="wp-block-heading" id="e5e5"><strong>HLC architecture</strong></h2>



<p id="dffc">HLC is a Client/Server protocol, where the EVCC (car) acts as the Client and the SECC (EV Charger) acts as the Server. It is based on a “request — response” mechanism as defined by Part-2 of ISO 15118, that defines a set of V2G request/response messages between the EVCC and the SECC. As per this mechanism, the car always sends request messages and the EV Charger sends back the corresponding response messages.</p>



<p id="809e">An example of a request — response message pair illustrating car-initiated V2G messages, is as follows:</p>



<p id="1160">Request message (from car) — SupportedAppProtocolReq<br>Response message (from EV Charger) — SupportedAppProtocolRes</p>



<p id="2fd5">The car sends this request message at the beginning of the charging session to find out the V2G protocol version supported by the EV Charger. All subsequent message exchange is possible only after the both handshake on the protocol version.</p>



<p id="1953">A few exceptional messages are triggered by the EV Charger, although not sent by it. As mentioned above, the EV Charger never directly sends a request message. In the exceptional cases, a message sequence is triggered indirectly by the EV Charger by setting a flag in its (previous) response message. The car responds to this by sending a new request message. Hence, request messages are always sent by the car. Renegotiation of the charging schedule when the grid undergoes unexpected demand fluctuations is an example of this exceptional case.</p>



<h2 class="wp-block-heading" id="f933"><strong>Message Timings</strong></h2>



<p id="8bbb">The car sends a new message every 60 seconds at the latest. The EV Charger must respond within 2 (to 5) seconds (depending on the message) to the incoming request. A few messages like CertificateInstall/Update and CableCheck have a larger timeout value.</p>



<h2 class="wp-block-heading" id="5807"><strong>V2G message sequences</strong></h2>



<p id="d1f5">The HLC model consists of various stages of the charging sequence as shown below, which also forms the basis of meaningful grouping V2G messages:</p>



<p id="75e3">A. Start of charging process</p>



<p id="9195">B. Communication setup (meaning HLC)</p>



<p id="5744">C. Certificate handling</p>



<p id="aa3c">D. Identification and Authorization</p>



<p id="1dd7">E. Target setting and charge scheduling</p>



<p id="082e">F. Charge controlling and rescheduling</p>



<p id="902f">G. Value-added services</p>



<p id="aee7">H. End of charging process</p>



<p id="840a">The following table describes V2G messages in more detail, though not exhaustively. The “Req” suffix indicates a request message sent by the car. There will be a corresponding “Res” response message sent by the EV Charger.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*6YT6XQpV56kiP1GTkFl0-A.png" alt=""/><figcaption class="wp-element-caption">V2G message sequences in HLC</figcaption></figure>



<p id="0ad1"><strong>#&nbsp;</strong>From the EVEnergyRequest parameter of the ChargeParameterDiscoveryReq message, the EV Charger comes to know how much energy the car is requesting to transfer into the battery.</p>



<p id="f7dc"><strong>#&nbsp;</strong>From the optional EVRESSSOC parameter of the ChargeParameterDiscoveryReq message, the EV Charger learns the State of Charge (SoC) of the battery (in %).</p>



<p id="afb3"># From the CurrentDemandReq message it knows how much charging current the (BMS of the) car is requesting.</p>



<p id="ae49"><strong>#&nbsp;</strong>The user sets the departure time on the car’s dashboard. From the DepartureTime parameter of the ChargeParameterDiscoveryReq message, the EV Charger learns the time of departure desired by the user.</p>



<p id="873b">#From the TimeToFullSOC parameter of the ChargeParameterDiscoveryReq message, the EV Charger knows the remaining time to charge.</p>



<p id="78e3">It looks like some light has started shedding on the basic questions that we set out with! Meanwhile, the optional nature of some of these parameters in ISO 15118 is driven by European GDPR regulations on how much information the user wants to share.</p>



<h2 class="wp-block-heading" id="30a9"><strong>Industry trends</strong></h2>



<p id="069a">Many advanced features of EVSE-EV communications are getting incorporated into ISO 15118, and commercial products implementing these features are steadily hitting various global markets. Imagine the richness of features that we are going to witness in the near future in emerging economies like India, as EVSE-EV communication tries to cover new scenarios, such as:</p>



<ul>
<li>Plug &amp; Charge — Just plug in the car, and the EV Charger recognizes the owner! No more RFID, QR code, mobile App etc.</li>



<li>Smart Charging — Synchronize with the grid through EV Chargers on charging schedules and charging currents of cars based on overall loading conditions of the grid, like charging at off-peak hours</li>



<li>Demand-based responsiveness — Dynamically synchronize through EV Chargers the charging of millions of EVs, especially at the time of unforeseen grid power fluctuations to avoid overwhelming the historically shaky grid capacity</li>
</ul>



<p id="e729">At SFO Technologies (the flagship company of NeST group), we test our EV Charger designs using a Battery Communications Simulator. The Simulator works exactly like a car, providing the same connector pins that work on AS as defined by IEC 61851 and capable of the HLC as defined by ISO 15118. Such is the beauty of standardization that compliance during design ensures that the EV Charger will work correctly when deployed in the field with any compliant car model (mechanically, electrically, communication-wise and software-wise).</p>



<p id="2b02">Specifically, Part-20 of ISO 15118 that was released last year (2022) includes certain futuristic features such as:</p>



<ul>
<li>Bidirectional Power Transfer (BPT) — Feeding the car battery’s power back to the home, or into the grid. Imagine charging the car at off-peak hours and feeding power back (selling) to grid at peak-hours (at better rates)!</li>



<li>Wireless Power Transfer (WPT) — Zero contact for power transfer while charging your car! Also called inductive charging, the transmitter coils (source) are encased in a plate embedded on the ground, for instance at a car parking. The receiver coils (load) are installed in the car conveniently close to the battery, which is anyway located at the floor of the chassis in most EV designs. So, one needs to just position the car using the guidance markings, so that the pair of coils align properly and charge by inductive coupling.</li>



<li>Automated Connection Device (ACD) — Space-age robotic arms that would avoid the manual operation of plugging in the charging gun to the charging inlet of the car. Pantographs are already popular with bus fleets. This would be useful especially for heavy water-cooled cables of Ultra-fast Chargers, and for autonomous vehicles. Imagine the irony of having to manually charge a driverless car!</li>
</ul>



<p id="7551"><strong>Conclusion</strong></p>



<p id="82bc">From the above concentrate of the wide spectrum of EV Charging standards juice, we can see that AS and HLC combine symbiotically to establish a complete e-Mobility communication system for EV Charging. So, the next time you plug in your electric car to an EV Charger, you will know better that it’s not just all voltages and currents. The software engineer in you can now visualize the 7-layer protocol stacks being loaded at both ends of that cable and V2G message sequences going back and forth even before power starts flowing into your car battery. You will probably smile knowing that the cable that is electrically charging your car is also buzzing with V2G activity literally all the time!</p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-2/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Time Sensitive Networks — Audio Video Bridging</title>
		<link>https://nestdigital.com/blogs/time-sensitive-networks-audio-video-bridging/</link>
					<comments>https://nestdigital.com/blogs/time-sensitive-networks-audio-video-bridging/#respond</comments>
		
		<dc:creator><![CDATA[Radhika Krishnan]]></dc:creator>
		<pubDate>Tue, 25 Jul 2023 17:08:12 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4527</guid>

					<description><![CDATA[Have you ever noticed how the live streaming of an event becomes uninteresting when the video and audio of the event are played on big screens without synchronization? It is generally termed as lack of lip sync. Audio Video Bridging (AVB) is a technology developed to address the streaming issues in industrial events, where live [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<p id="8264">Have you ever noticed how the live streaming of an event becomes uninteresting when the video and audio of the event are played on big screens without synchronization? It is generally termed as lack of lip sync.</p>



<p id="5c4f">Audio Video Bridging (AVB) is a technology developed to address the streaming issues in industrial events, where live streaming events faced issues due to loss of synchronization between audio and video data, played at different points. AVB is presented as a protocol enhancement to the Ethernet network, which is the cheapest and most commonly available networking technology available.</p>



<p id="5381"><strong>AVB in automotive network:</strong></p>



<p id="c647">Over the past few years, multimedia technologies used in automobiles have increased considerably, owing to the consumer demands and evolving technologies. Features such as media playback from multiple sources (USB / Bluetooth / Wi-Fi / YouTube / Radio), surround view cameras, and built in navigation support have become commonplace options in many mainstream automobiles. Rear Seat Entertainment (RSE) units are growing in sophistication with more sources and choices at your fingertips. Each of these options has added to the need and desire for a common networking architecture in the automobile.</p>



<p id="7c25">Even though CAN is the universally accepted networking technology in automobiles, the varied requirements of multimedia usage like scalability, QoS, cost, bandwidth requirements provides an open door to other technologies as well.</p>



<p id="9945">The networking solutions used in automobiles have different constraints ranging from the deterministic nature of network to the temperature sensitivity of the cabling materials used. The IEEE 802.1 Audio Video Bridging (AVB) task group and the IEEE 1722 AVTP working group offers a standards-based approach for highly reliable networked transmission for low-latency applications like those found within an automobile. Wired Ethernet networks employing AVB protocols are very well suited to automotive deployment due to both simplified cabling and reliability of a hard-wired solution.</p>



<p id="1439">Initially, AVB was used in automotive networks for infotainment systems to distribute media data and also for transmitting control data among other components in the cockpit domain.</p>



<h1 class="wp-block-heading" id="1224"><strong>How AVB works</strong></h1>



<p id="13d4">AVB is an enhancement to the Ethernet suite of open standards. It provides quality of service (QoS) guarantees, a network time synchronization service, and a related transport protocol for transmission of time-sensitive traffic that together allow a network to handle audio-visual (AV) data. In the automotive environment, it can also satisfy more generalized time-sensitive networking requirements, opening up the possibility of a single network that handles infotainment, body control, driver assistance and even safety-critical functions.</p>



<p id="e756">AVB uses different concepts to meet its requirements, which are defined in different Ethernet standards as amendments. The major concepts are network time synchronization, data priority, stream reservation and traffic shaping and queueing. To enhance the feature sets, there is dynamic device discovery and enumeration and control features, but this is rarely used in automobiles.</p>



<p id="6512">AVB network consists of Talker — the component that streams the media (camera, media player, mobile phone), Listeners — component that renders the received media (display module, speakers) and AVB switches and bridges — connecting the different AVB and non-AVB components in the network.</p>



<p id="80d8">An ethernet network becomes AVB enabled, when the clock of all the AVB enabled devices becomes synchronized with a Grand Master clock. The grand master clock is provided by one of the network components and all other devices will accept the master clock as their clock. Without synchronizing, AVB communication does not happen. When a talker is ready to do the streaming (a user selects play button), it sends out a&nbsp;<em>Talker Ready</em>message, with the stream information and the switch will send this packet to all the connected devices. The listeners, who are capable of rendering the talker’s stream responds with&nbsp;<em>Listener Ready</em>&nbsp;message. The stream is reserved by MRP packets, where the talkers and listeners join a VLAN with&nbsp;<em>MRP Join</em>message. The talker will start streaming, as soon as it receives at least one&nbsp;<em>Listener Ready</em>&nbsp;message. Once the streaming is completed, the devices leave the VLAN using&nbsp;<em>MRP Leave</em>&nbsp;message and the stream reservation ends.</p>



<p id="9020">All the AVB packets will contain a time, presentation time, which specifies the time on which the data should be played back. This time is based on the synchronized clock and is calculated based on the listener who is farthest from the talker. All the listeners will be able to recreate the media data and the presentation time from the received packet and will be played at the presentation time specified. This is how AVB achieves synchronized play back at all the listeners.</p>



<h2 class="wp-block-heading" id="fcf4"><strong>AVB Network Components:</strong></h2>



<p id="6720">AVB Network consists of AVB enabled bridge and AVB enabled end points. The network limit stops when a non-AVB bridge comes in between.</p>



<p id="2942">AVB Switch / Bridge — Identifies AVB messages, routes it to the right devices.</p>



<p id="bcf2">End points — Talkers and listeners.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1050/1*CoCPYlKqtR-RmTmt6Rld9g.png" alt=""/><figcaption class="wp-element-caption">AVB Network components (Image credit: AVnu alliance)</figcaption></figure>



<p id="906c">In an AVB network, upto 7 hops (bridges) are supported. The maximum network delay between a talker and a listener in an AVB network is 2 ms. This means that even if there are 7 bridges between a talker and a listener, a packet will reach from the talker to the listener within 2 ms. This is ensured by creating and communicating the presentation time of each frame by the talker. The presentation time is calculated based on the link delay to each node in the network.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1062/1*Xjh2yNZwepM7Gvxk3ZP1Yw.png" alt=""/><figcaption class="wp-element-caption">Data transmission (Image credit:AVnu alliance)</figcaption></figure>



<h1 class="wp-block-heading" id="d8a0"><strong>Technology Overview</strong></h1>



<p id="8fe2">The IEEE 802.1 AVB and IEEE 1722 standards form the foundation for the technology promoted by AVnu alliance, along with the enhancements to other 802.1 technologies for bridges and switches.</p>



<p id="2f50">The foundational standards for AVB are explained in the below sections.</p>



<p id="bed2"><strong>IEEE 802.1AS (PTP) based on IEEE 1588:</strong></p>



<p id="0f7c">PTP is Precision Time Protocol, which ensures that all AVB capable devices in a network uses a single clock provided by a common Grand Master. There can be multiple devices in the network capable of providing master clock. The Grand master is selected from these devices by running the Best Master Clock Algorithm (BMCA). The devices with the same grand master shall be able to communicate with each other directly. The messages that are used in time synchronization mechanism are:&nbsp;<em>Announce, Sync and Follow up.&nbsp;</em>The devices in the network calculate the delay from each other by sending&nbsp;<em>Path Delay Request</em>&nbsp;and from the&nbsp;<em>Path Delay Response</em>. The synchronization message flow is:</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1050/1*f2z1V5H4ZE7IPF8p0nQwiw.png" alt=""/><figcaption class="wp-element-caption">PTP Message flow (Image credit:AVnu alliance)</figcaption></figure>



<p id="0816"><strong>IEEE 802.1Qat — Stream Reservation:</strong></p>



<p id="17ba">AVB has two classes of data — class A (every 125 micro seconds) and class B (every 250 micro seconds). The media data (audio and video) are normally sent using class B. To achieve this transmission timing requirement, the available bandwidth has to be reserved when there is an AVB data is ready to send. The bandwidth reservation shall also be teared down when the transmission is completed. A maximum of 75% of available bandwidth shall be reserved for AVB transmission. This stream reservation is defined by 802.1Qat specification. This is normally implemented by talkers and AVB switches.</p>



<p id="c8de">When a talker is ready to transmit data, it will send a&nbsp;<em>Talker Advertise</em>&nbsp;with the stream information — type of stream, media type, etc. When a listener who is ready to accept and play back this stream receives the advertisement, it will respond with&nbsp;<em>Listener Ready</em>&nbsp;message. There can be more than one listeners sending the&nbsp;<em>Listener Ready</em>, accepting all or partial media announced by the talker. The talker will start the transmission only if it receives at least one&nbsp;<em>Listener Ready</em>&nbsp;message. If there is error,&nbsp;<em>Talker Advertise failed / Listener Ready failed</em>&nbsp;are the messages transmitted.</p>



<p id="4c97">Before starting the transmission, the bandwidth will be reserved by sending&nbsp;<em>MRP request</em>&nbsp;and the talker and listeners can join a VLAN announced in the MRP using&nbsp;<em>MRP Join</em>&nbsp;request and can leave the network using&nbsp;<em>MRP Leave</em>request. This will also tear down the bandwidth allocation.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:896/1*wJv2cThTdiYZKlQIiRUSag.png" alt=""/><figcaption class="wp-element-caption">Stream Reservation Message flow</figcaption></figure>



<p id="63cc"><strong>IEEE 802.1Qav — Forwarding and Queuing</strong></p>



<p id="916d">Along with stream reservation, a forwarding and queuing mechanism is also implemented in AVB to ensure that the packets are not dropped. Like SRP, talkers and bridges implement FQTSS and this is mostly implemented in the hardware. Credit shaped algorithm is used for the queuing mechanism and the credit is given if at least one frame is available in the queue and the&nbsp;<em>transmitAllowed</em>&nbsp;signal is True for the queue. The packet is launched when the credit reaches a maximum value. It ensures that if a frame is queued in the priority class, it will get the transmission bandwidth at regular intervals, which will not be more than 125 micro seconds for class A and 250 micro seconds for class B.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1050/1*Eo4SeWzi0W8yc0VmvcArog.png" alt=""/><figcaption class="wp-element-caption">Credit shaped queueing (Image Credit: AVnu alliance)</figcaption></figure>



<p id="bd1c"><strong>IEEE 1722 — AVB Transmission Protocol (AVTP)</strong></p>



<p id="057d">AVTP specifies the packet format and the requirements to transmit an AVB packet through network. Talkers start the transmission and listeners receives and recreates the packets. The bridges ensures that the packets are sent at proper time and stream reservation is created and removed according to the transmission .</p>



<p id="4de2">One important point to notice in AVTP is that the packets are transmitted to pre-defined&nbsp;<em>multicast addresses</em>. Point-to-point transmission is not done in AVB. This is because there can be multiple listeners, waiting to receive the packets and all of them need to play back the data at the same time. Point-to-point transmission will need more bandwidth and the timing issues will occur.</p>



<p id="83d9">Each AVTP packet will contain the streaming data, along with a timing information that mentions when to play back the received data. This&nbsp;<em>presentation time</em>&nbsp;is provided by the talker and is calculated based on the listener node that is farthest from the talker. All listeners recreate the presentation time and it will be aligned with the synchronized global time, hence the time for the packets at all listeners will be same. This is&nbsp;<em>media clock recovery</em>.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1050/1*r5H0kA4mk5gl02AuSOyfyw.png" alt=""/><figcaption class="wp-element-caption">AVB Software modules (Image credit: AVnu Alliance)</figcaption></figure>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1080/1*2Qsf7GUlRMEqSCH-ieBfIA.png" alt=""/><figcaption class="wp-element-caption">AVTP frame format (Image credit: AVnu alliance)</figcaption></figure>



<p id="9735"><strong>IEEE 1722.1 — Discovery, Enumeration and Control (AVDECC)</strong></p>



<p id="370a">In networks, where nodes (talkers and listeners) are dynamically added and removed, device discovery protocol is used. A control module is needed to handle the AVDECC protocol, which can be a stand alone module or part of any other node.</p>



<p id="91d9">The AVDECC protocol lets the nodes identify the stream ID and verify if it is suitable for the node configurations. It also allows control data flow — like volume control dynamically without the use of a parallel communication path. The features of a stream will be announced by the talker and it will be enumerated in a standard way so that the listeners and bridges will be able to decode and understand.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1050/1*uCycAaJayVvkGXaguq1WDg.png" alt=""/><figcaption class="wp-element-caption">AVDECC flow (Image credit: AVnu alliance)</figcaption></figure>



<h1 class="wp-block-heading" id="5d3b"><strong>Open AVnu</strong></h1>



<p id="e69d">OpenAvnu is an AVnu sponsored repository for Time Sensitive Network (TSN and AVB) technology. The code is in C programming language, works in Linux operating system and is primarily created for Intel’s i210 Ethernet card as the hardware platform.</p>



<p id="cf07">The openAvnu source code is used by most of the AVB / TSN stack developers to customize their own stack since it provides a base for directory structure, build mechanisms and source code arrangement.</p>



<p id="d324">It supports different media mapping schemes and also provides sample applications to use the stack.</p>



<h1 class="wp-block-heading" id="8e40"><strong>TSN (Time Sensitive Network)</strong></h1>



<p id="2ca1">AVB and TSN are more or less same technology, where TSN offers more deterministic services through ethernet. Currently, the AVB task group is renamed as TSN and the OpenAVnu stack supports TSN.</p>



<p id="32c7">The summary of TSN components are given below. Most of the components are same as AVB, providing more reliability, low latency, better resource management and better synchronization.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*3jrP8czIRUqwzAfa5AmMqw.png" alt=""/><figcaption class="wp-element-caption">TSN components (source credit —<a href="https://medium.com/tech-blogs-by-nest-digital/www.ieee802.org" rel="noreferrer noopener" target="_blank">&nbsp;</a><a href="http://www.ieee802.org/" rel="noreferrer noopener" target="_blank">www.ieee802.org</a>)</figcaption></figure>



<h1 class="wp-block-heading" id="033f"><strong>AVB stack customization:</strong></h1>



<p id="cddf">At NeST Digital, we have customized OpenAVnu AVB stack in different phases for developing talker and listener on various embedded platforms like i.mx6Q and i.mx8M for automotive applications, in infotainment area. The customized stack is verified with OpenAvnu stack (original version), NXP AVB stack, Renesas AVB camera module and AVB switches from NXP, Marvell and Renesas. The pre-certification testing is done with Spirent tool.</p>



<p id="f4b5">The media types used for custom AVB stack are: MP3 audio, H264 video, Raw audio from AM/FM tuner, Miracast stream from Android phone.</p>



<h1 class="wp-block-heading" id="8e3d"><strong>Issues faced:</strong></h1>



<p id="cfa6">Some of the issues that we faced during the OpenAvnu AVB stack customization are:</p>



<ol>
<li>MRP daemon was sending all frames, regardless of talker / listener and packet received or not.</li>



<li>gPTP daemon was hardcoded for many parameters. Hence not able to execute for features like automotive profile.</li>



<li>NXP stack expected the listener simulated a fast connect, even though it was not connected to the NXP talker earlier.</li>



<li>OpenAvnu Listener was connecting only to one stream — audio or video at a time.</li>



<li>gPTP daemon was not connecting to other gPTP domains to execute BMCA algoritm</li>



<li>In i.mx8M listener, ~1 sec jump observed while playing video</li>



<li>Stack had to stop and start every time a stream is completed.</li>



<li>H264 camera data was unable to process by the OpenAVnu listener</li>



<li>After reboot, delay was observed from i.mx8M talker to transmit data.</li>



<li>i.mx8M talker was always sending the data through one queue, the FQTSS was not getting effective and standard data packets were suffering packet loss</li>
</ol>



<h1 class="wp-block-heading" id="b3aa"><strong>Summary:</strong></h1>



<p id="a888">The blog is expected to give an overview of Audio Video Bridging, the key technologies behind the feature and the details of how an open source AVB code, sponsored by AVnu alliance was used to develop a custom AVB software stack for multiple hardware platforms with added feature sets.</p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/time-sensitive-networks-audio-video-bridging/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>“Hello Mr. EV Charger, I’m a flat car battery!” (Part-1)</title>
		<link>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-1/</link>
					<comments>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-1/#respond</comments>
		
		<dc:creator><![CDATA[Ram Mohan Ramakrishnan]]></dc:creator>
		<pubDate>Tue, 25 Jul 2023 17:06:29 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4524</guid>

					<description><![CDATA[Abstract Electric car users need to frequently recharge the traction battery, and while doing so they need to be assured of an efficient, safe and interoperable experience, be it AC charging or DC charging. EV Charging standards assure users that they can charge their car from any compatible EV Charger. Apart from electrical protection that [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<h2 class="wp-block-heading" id="fd1e"><strong>Abstract</strong></h2>



<p id="f33b">Electric car users need to frequently recharge the traction battery, and while doing so they need to be assured of an efficient, safe and interoperable experience, be it AC charging or DC charging. EV Charging standards assure users that they can charge their car from any compatible EV Charger. Apart from electrical protection that is mandated by regulations to handle an untoward safety situation, bidirectional communication in real time between the EV Charger and the car is required throughout the charging session to ensure that the charging capabilities and limitations are mutually understood and any mismatches and unsafe conditions are proactively avoided. Protocol standards for EVSE-EV communication enable the EV Charger and the car to talk to each other towards fulfilling this objective.</p>



<h2 class="wp-block-heading" id="84de"><strong>Introduction</strong></h2>



<p id="e7a7">Ever wondered how an EV Charger knows what current to charge the car battery at? Contrast this with filling up a petrol/diesel car. Is filling up at different rates of fuel flow even relevant! We know liquid fuel is always pumped at the same flow rate, no matter which model and irrespective of whether the tank is empty or near-full.</p>



<p id="9ec9">Further, how does the EV Charger know how much time to charge the battery? In other words, how does it know when exactly to stop charging? In contrast, in a petrol/diesel pump a simple mechanism consisting of an auxiliary sensing tube mounted on the nozzle along with a mechanical valve based on venturi effect (based on pressure difference of the fluid at either end) is employed for automatic cut off of fuel flow when the tank is full. The same mechanism could also be activated manually to stop filling while looking at a particular readout on the fuel meter, or for a pre-set quantity.</p>



<h2 class="wp-block-heading" id="9ebe"><strong>Communication, for intelligence beyond power transfer</strong></h2>



<p id="42f0">From these differences it is obvious that the EV Charger (and the electric car itself) need to have much more intelligence compared to their fossil fuel counterparts. Welcome to the lesser known world of EVSE-EV communications! (Where EVSE stands for Electric Vehicle Supply Equipment which is the terminology for EV Charger, and EV refers to the car.)</p>



<p id="e1b9">Now that the “WHYs” of EVSE-EV communication are amply illustrated, let’s see “HOW” exactly the communication happens, and over what medium. If you’re an EV user, you would have used the charging gun of an EV Charger already by plugging it into your car’s inlet to charge. Take a closer look at the charging connector — although the primary purpose of the connector design is to transfer electric power, a few additional pins (apart from the power pins) are provided for communication. Let’s zoom in on the charging gun of the Combined Charging System 2 (CCS2) (group of) standard(s), that is predominant in Europe and has also been adopted in India, and their connector pinouts. Firstly, the CCS2 AC Charging connector.</p>



<h2 class="wp-block-heading" id="cd47"><strong>EVSE-EV Communication (AC Charging Connector)</strong></h2>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*mbCyB0tXg4NkL6s8pnTQBw.png" alt=""/><figcaption class="wp-element-caption">AC Connector Pinout</figcaption></figure>



<p id="cbf1">As we can see in the above 2 pictures, out of the 7 pins provided in the AC connector, 4 are reserved for (1Phase/3Phase) AC power transfer — Phase1 (R), Phase2 (Y), Phase3 (B) and Neutral. Whereas, 3 pins are dedicated for EVSE-EV communication — Control Pilot (CP), Proximity Pilot (PP) and Protective Earth (PE), which forms the ground reference.</p>



<p id="280d">Now, the CCS2 DC Charging connector.</p>



<h2 class="wp-block-heading" id="35ad"><strong>EVSE-EV Communication (DC Charging Connector)</strong></h2>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*GkUAS5rkbv1YorEMAxBy2w.png" alt=""/><figcaption class="wp-element-caption">DC Connector Pinout</figcaption></figure>



<p id="331c">As we can see in the above 2 pictures, out of the 5 pins provided in the DC connector, 2 are reserved for DC power transfer — DC + and DC -. Whereas, 3 pins are dedicated for EVSE-EV communication — Control Pilot (CP), Proximity Pilot (PP) and Protective Earth (PE), which forms the ground reference.</p>



<p id="30ed">As we can see, these communication pins have quaint names — Control Pilot (CP) and Proximity Pilot (PP). The CP pin is used for most of the signalling related to electrical power transfer, whereas the PP pin provides feedback on whether the car is currently plugged in or not. The Protective Earth (PE) pin acts as the ground reference for the other 2 signals.</p>



<p id="c54a">CCS2 also has the Combo plug, that includes power pins for both AC and DC charging in the same connector. However, the communication pinout (CP, PP and PE) remains the same as described above, in position as well as in function.</p>



<h2 class="wp-block-heading" id="5ccd"><strong>EVSE-EV Communication (Combo Connector)</strong></h2>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*p31N2xSbUh7cMlsK2RF1BQ.png" alt=""/><figcaption class="wp-element-caption">Combo Connector Pinout</figcaption></figure>



<p id="fce5"><strong>Note:</strong>&nbsp;In other popular EV Charging standards, like CCS1/SAEJ1772 (US), CHAdeMO (Japan), GB/T (China) and Tesla (global), the pin names, positions and electrical function may vary across each other, but a few dedicated pins are always provided for communication.</p>



<h2 class="wp-block-heading" id="fce5"><strong>Types of EVSE-EV communication</strong></h2>



<p>Two types of communication are possible between the EV Charger and the car. For the CCS2 system, these are:<br>1. Analog Signalling (AS), defined by the IEC61851 standard (the successor of the US SAE J1772)<br>2. High Level Communication (HLC), defined by the ISO15118 standard (the successor of the German DIN SPEC 70121, that covers only DC Charging)</p>



<p id="dd8a">Analog Signalling is the elementary communication mechanism between the EV Charger and the car over dedicated signal lines. Whereas HLC implements digital message communication to implement additional (and a few optional) functionality. In this (first) part, we take a closer look at how Analog Signalling works. In the next (second) part, we will deep dive into High Level Communication.</p>



<h2 class="wp-block-heading" id="c27a"><strong>Analog Signalling</strong></h2>



<p id="9d20">Analog Signalling as the name indicates, employs electronic circuitry on the EV Charger and on the car for generating as well as detecting specific voltage levels and wave patterns (having specific timing characteristics) across specific signal lines. Analog Signalling protocol is defined by the IEC 61851 standard (Electric Vehicle Conductive Charging System) that defines the levels of voltages and currents, modes of charging, connectors and safety aspects for both AC Charging and DC Charging.</p>



<p id="ff1e">The 2 specific pins used for Analog Signalling are Control Pilot (CP) and Proximity Pilot (PP), with the Protective Earth (PE) pin acting as the ground reference. The pilot signal generated by the EV Charger is a +12V to -12V square wave at 1000Hz.</p>



<p id="8297">Discrete voltage levels or waveforms on the Control Pilot line represent different states to the EV Charger and the car. The duty cycle of the square wave itself represents the current that will be transferred in the current charging session. The following table captures the discrete voltage levels and waveforms on the CP line and the interpretation of each electrical pattern by the EV Charger.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*OZX3bVvOQFhMQ74ZSuTmVQ.png" alt=""/><figcaption class="wp-element-caption">Analog Signalling States</figcaption></figure>



<p id="2801">(*) PWM — Pulse Width Modulation, a standard method of varying the pulse width of a square wave.</p>



<p id="3796">(**) Ventilation — This is typically not required for Lithium Ion batteries of today. It is only a carry-over left in the protocol from the Lead Acid battery days, which needed active ventilation to dissipate hazardous gases emitted during charging. If the EV Charger is located in an enclosed area, an exhaust fan is typically turned on.</p>



<h2 class="wp-block-heading" id="88fb"><strong>Example scenarios</strong></h2>



<p id="b835">Let us look at a few communication scenarios involving Analog Signalling. For instance, when the EV Charger sees +12V DC on the Control Pilot line, it knows that the car is not yet plugged in, so it waits. As soon as the voltage drops to +9V DC, it knows that the car is plugged in. Internally the car presents a specified resistance when it is plugged in, that causes this voltage drop/transition.</p>



<p id="f756">Similarly, when the EV Charger sees that its pilot signal that was a +12V to -12V square wave at 1000Hz, is now having the positive side chopped down at +9V (due to the resistance presented by the car), with the negative side still at -12V, it knows that the car that is plugged is preparing to receive power, but not yet ready. As soon as the positive side gets further chopped down to +6V (due to increased resistance presented by the car), with the negative side still at -12V, it knows that the car is now ready to receive power. In response to this state transition, the EV Charger closes the output contactor thereby connecting electrical power to the car.</p>



<p id="e969">From this, we can infer how the EV Charger knows when to stop charging. In this case the wave pattern would changes from a +6V to -12V square wave, back to a +9V to -12V square wave (due to decrease in the resistance presented by the car). In response to this state transition, the EV Charger opens the output contactor thereby disconnecting electrical power from the car. This could happen because the BMS system (***) controlling the car battery decided that the battery is now “fully charged” (****) now, and it is time to stop charging. It could also happen if an emergency safety condition was detected during the session that warranted immediate charging shutdown. Either way, the car is requesting to stop charging.</p>



<p id="13bf">(***) BMS — The car battery gets charged under full supervision of the Battery Management System. The BMS controls the rate at which the battery pack is charged, equalizing cell voltages and ensuring temperatures do not rise up dangerously, besides deciding when to stop charging.</p>



<p id="6880">(****) “Fully charged” — Most EV OEMs and Lithium Ion battery manufacturers typically set a guard band on the upper level of battery charge. Hence although it may display 100% on the dashboard, the real battery level would be somewhere in the 80% to 90% range.</p>



<h2 class="wp-block-heading" id="6441"><strong>Rate of charging (or charging current)</strong></h2>



<p id="eb60">Ok, so how does the Charger know at what current to transfer power to the car in the charging session? As we saw earlier, the duty cycle of the square wave is utilized for this purpose. As we know, the duty cycle is 50% if the square wave is symmetrical.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*fadFrz2PXlAqkCFOxmYMsw.png" alt=""/><figcaption class="wp-element-caption">PWM with 50% Duty Cycle</figcaption></figure>



<p id="c3eb">As we increase the pulse width on the positive direction, it gets closer to 100%, where most of the time it has positive value.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*UQ659NLRFTFE4h1p63sV_g.png" alt=""/><figcaption class="wp-element-caption">PWM with 75% Duty Cycle</figcaption></figure>



<p id="13d2">Whereas if we increase the pulse width on the negative direction, it gets closer to 0%, where most of the time it has negative value.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*h0qK0y4YQ5EMaJJv7XA9pw.png" alt=""/><figcaption class="wp-element-caption">PWM with 25% Duty Cycle</figcaption></figure>



<p id="2857">The EV Charger therefore generates a square wave as per the IEC61851 Standard, to signal the charging current value. So, what is the correlation between the duty cycle of the square wave and the current? Here is where it involves a little bit of abracadabra!</p>



<p id="9db8">Firstly, the full range of current from 6A to 80A is split across 2 ranges:<br>Lower range: 6A to 51A<br>Upper range: 51A to 80A</p>



<p id="a691">Why this bizarre split range? We will see soon.</p>



<p id="0f96">Secondly, the formula in the lower range to convert duty cycle (%) to current (A) is<br><strong>A = Duty cycle (%) x 0.6</strong></p>



<p id="fc3c">However, the relation of current and duty cycle is not linear throughout the range.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*j2bTyKK5u4G3to5xhrbs8g.png" alt=""/><figcaption class="wp-element-caption">Current Vs Duty Cycle</figcaption></figure>



<p id="3a64">The initial part of the curve has a relatively steep slope, with an increase of 6A for every 10% increase in duty cycle.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*lcO5ORr961u0SWk05KR48w.png" alt=""/><figcaption class="wp-element-caption">Lower range (Current Vs Duty Cycle)</figcaption></figure>



<p id="5cde">At the inflection point of 51A, the curve changes to a milder slope. So that is what necessitates a split range.</p>



<p id="11ca">To accommodate for this gradient change, the formula in the second range (beyond 51 A) changes to&nbsp;<br><strong>A = (Duty cycle (%) — 64) x 2.5</strong></p>



<p id="650a">So, the remaining part of the curve has a milder slope, with an increase of 5A for every 2% increase in duty cycle.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1342/1*tKuRIKgZYZJSX14GlEE3qg.png" alt=""/><figcaption class="wp-element-caption">Upper range (Current Vs Duty Cycle)</figcaption></figure>



<p id="93a7">From this relation, we can see that&nbsp;<br>1) The valid range of duty cycle of the square wave is between 10% and 96%.&nbsp;<br>2) 10% duty cycle corresponds to 6A charging current.<br>3) 50% duty cycle (symmetrical square wave) corresponds 30 A charging current.<br>4) 96% duty cycle corresponds to 80A charging current.</p>



<h2 class="wp-block-heading" id="253e"><strong>Connected or not</strong></h2>



<p id="94d1">Ok, now how does the car know that it is connected properly to the EV Charger or not? For safety it is very important that the car ‘knows’ that it is securely connected to the EV Charger.</p>



<p id="5730">Here is where the Proximity Pilot (PP) pin (also known as Plug Present) is useful. The Proximity Pilot in the plug serves this purpose by creating a circuit via a resistor to the Protective Earth (PE) pin. Firstly, if the connection is not proper it allows to disable the charging process for safety. Further, it helps prevent the user driving off accidentally with the charging gun inserted.</p>



<p id="cbcc">Thus, by applying a voltage to Proximity Pilot (PP) pin, the car detects a voltage drop when the charging gun is connected to its inlet as this will create an electric circuit. This provides a signal to the car’s control system to prevent any movement while being connected to the EV Charger. It provides an additional function (*****) of signalling the latch release (optional) button to the car, so that the car could initiate a controlled shut off prior to the electrical disconnection of the power pins.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*DUAjq6xn1AO5Jc_mkrSZXQ.png" alt=""/><figcaption class="wp-element-caption">Connection State Vs PP Voltage</figcaption></figure>



<p id="03c3">At SFO Technologies (the flagship company of NeST group), we test our EV Charger designs using a Battery Communications Simulator. The Simulator presents an identical interface of the car, and works exactly like a car. It provides an identical connector and pinout just like a CCS2 compliant car. It works on the same Analog Signalling protocol, mimicking exact voltages, waveforms and timing characteristics as defined by the IEC61851 standard, that the EV Charger thinks it is connected to a real car! This standards compliance of the design ensures it will work correctly with any compliant car model.</p>



<p id="2fd8">(*****) Additional function — The PP pin also includes a legacy function of detecting the capacity of charging cables that are not tethered to the EV Charger, and hence their current capacity is unknown to the EV Charger. To ensure safe charging, it first makes sure that the cable has enough capacity for the current that it is planning to supply before actually transferring power. For this the resistance value on the PP line is adjusted such that the current flowing when measured gives an indication of the cable’s capacity. This function is not relevant nowadays, since the charging cable is an integral part of the EV Charger and hence its capacity is already known.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*mj8kIgMZRXh7_OU8G4W63Q.png" alt=""/><figcaption class="wp-element-caption">Power cable capacity Vs PP Resistance</figcaption></figure>



<h2 class="wp-block-heading" id="2370"><strong>To be continued…</strong></h2>



<p id="3a87">In all of this communication by raw voltages, waveforms and their timings that starts as soon as the car is plugged in, one cannot simply miss the ingenuity of the protocol at the basic electrical level — simple, yet functional! Analog Signalling is implemented entirely at the hardware level, using simple electronic circuitry consisting of discrete/analog components and mixed signal ICs. The average software engineer could understandably be left shrugging at all those voltage levels and waveforms, while it’s pure delight for the hardware engineer! I promise I will make the next (second) part on High Level Communication equally (or more) exciting for the software engineer as well.</p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/hello-mr-ev-charger-im-a-flat-car-battery-part-1/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>The d/dt of EV Charging</title>
		<link>https://nestdigital.com/blogs/the-d-dt-of-ev-charging/</link>
					<comments>https://nestdigital.com/blogs/the-d-dt-of-ev-charging/#respond</comments>
		
		<dc:creator><![CDATA[Ram Mohan Ramakrishnan]]></dc:creator>
		<pubDate>Mon, 24 Jul 2023 15:07:34 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4511</guid>

					<description><![CDATA[Abstract Slow charging time, along with other hurdles like range anxiety, has been plaguing EV adoption for many years now. While charging overnight from AC mains supply at home is really slow, Fast DC chargers at the roadside and along highways help charge the car battery within a reasonable time. Charging time depends on multiple [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<h2 class="wp-block-heading" id="eaf1"><strong>Abstract</strong></h2>



<p id="f9b9">Slow charging time, along with other hurdles like range anxiety, has been plaguing EV adoption for many years now. While charging overnight from AC mains supply at home is really slow, Fast DC chargers at the roadside and along highways help charge the car battery within a reasonable time. Charging time depends on multiple variables, such as the charging station’s power, battery capacity, charging capability of the car and ambient temperature. One needs to be careful in equalizing these variables while making comparisons to avoid ending up with inaccurate judgements. While the industry has responded with Fast chargers and innovations in Ultra-Fast charging technologies, battery designs haven’t quite kept pace. High costs of installation and charging, widespread compatibility issues across EVs and the potential impact on battery life have been blockers in a resolution to the charging time problem.</p>



<h2 class="wp-block-heading" id="af58"><strong>Introduction</strong></h2>



<p id="ac20">How would you react when told that your electric car could now charge fully in only a few minutes! Or, if you don’t have an EV already, is the charging time a mental block for considering buying one? Well, the solution may just have arrived. Announced by ABB in the fall of 2021 as the world’s fastest electric car charger, the Terra360 fully charges an electric car in under 15 minutes!</p>



<p id="bc37">Generations of petrol/diesel car users have enjoyed fill up times of only a few minutes. Even a fill up from empty to full tank takes hardly 5–10 minutes. Whereas users of electric cars (both pluggable hybrid and battery electric) have learned to wait patiently for at least an hour or more after hooking up the car to a public charging station for getting fully charged — a stark contrast, indeed! For instance, the Tata Nexon EV specifies around 60 minutes to charge from 10% to 80% from a Fast DC charger, as an acquaintance of mine confirms with his 2 years old model. While Hyundai Kona EV specifies 0% to 80% in 57 minutes. “Why only 80%, why not 100%” would be the natural question, which we will address a bit later. (*)</p>



<h2 class="wp-block-heading" id="bc90"><strong>Charging levels</strong></h2>



<p id="f392">The stereotype of charging at a public charging station is technically called Level-3 charging, or more commonly as Fast Charging. However, this isn’t the only way of charging. An electric car could be charged at home as well although much more slowly, a convenience that petrol/diesel car users never had. Charging from an AC charger located in the garage or parking lot from a power socket of 15–16A rating, that would typically take 7–10 hours for a full charge, is technically called Level-2 charging. For instance, the Tata Nexon EV specifies around 9 hours 10 minutes to charge from 10% to 90% from a 15A AC socket, which was confirmed by the same acquaintance. While Hyundai Kona EV specifies around 6 hours for 0% to 100% charge. This way is ideal for overnight charging.</p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:450/1*Bo6jPI0qzkrxm08lZIgcTw.jpeg" alt=""/><figcaption class="wp-element-caption"><br></figcaption></figure>



<p class="has-text-align-center"><em>ABB Terra 54kW DC Fast Charger (Image courtesy: ABB)</em></p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:142/1*2vTEaG0zLVERFLnnYQXMwg.png" alt=""/><figcaption class="wp-element-caption"><br></figcaption></figure>



<p class="has-text-align-center"><em>Schneider Electric “EVLink” 7.4kW AC Home Charger (Image courtesy: Schneider Electric)</em></p>



<p id="d37b">Slow charging from a domestic AC charger is not a concern for most users since it happens overnight, conveniently. But when it comes to charging at a public charging station, especially in the middle of a long journey at the roadside or along the highway, that is when the charging time becomes a serious concern. In fact, charging time is acknowledged as one of the adoption hurdles for most petrol/diesel users thinking of switching over to electric. That is exactly where the likes of Terra360 deliver the knockout punch! (**)</p>



<h2 class="wp-block-heading" id="8585"><strong>Battery charge rate measurement</strong></h2>



<p id="c5b8">Let’s take a moment to peep under the hood to understand why electric charge won’t flow into a car battery as quickly as petrol/diesel flows into the fuel tank, why even “fast” charging has been relatively slow! The Lithium Ion battery, the most prominent chemistry of today, charges at a fairly uniform rate (for example, 5% charge in every 4 minutes) up to a threshold of around 80%. Minor variations could exist in the threshold value across battery designs. Beyond that threshold, the last lap to 100% charge takes up almost the same amount of additional time. Incidentally that last lap isn’t desirable for Lithium Ion battery either.</p>



<p id="3abf">(*) That is why most manufacturers limit it to 80% charge while specifying charging time.</p>



<p id="82c3">Further, the rate of charging is a function of several variables like (but not limited to) power output of the charging station, the car’s battery capacity and the charging capability of the car. Ambient temperature also impacts charging rate, although to a lesser degree. So, while comparing charging times across different vehicle makes/models, if one is not careful enough in equalizing most of the variables if not all, then one could end up with an unrealistic comparison.</p>



<p id="35db">For instance, the battery capacity could vary across EVs — like 30.2 kWh Li Ion battery for the Tata Nexon EV, versus 39.2 kWh Li Ion Polymer battery for the Hyundai Kona EV.</p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*ahrcPFubtT5JmoEfOp3o1g.png" alt=""/></figure>



<p class="has-text-align-center"><em>Electrical specifications (Courtesy: Tata Motors, Hyundai Corporation)</em></p>



<p id="4cd7">Similarly, without knowing whether the charger used was from Exicom or Delta Electronics and its power rating, a straight comparison between charging time measurements wouldn’t be a level playing field.</p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:282/1*xHmvgotVWrVfiCn1t_q5Ew.png" alt=""/></figure>



<p class="has-text-align-center">Delta Electronics 200kW Fast DC Charger (Image courtesy: Delta Electronics)</p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:274/1*0yWGiRPBCs8b346yqSDlQA.png" alt=""/></figure>



<p class="has-text-align-center"><em>Exicom 240kW DC Fast Charger (Image courtesy: Exicom)</em></p>



<p id="e9e2">The charging capability of the EV is determined by its Battery Management System (BMS), which is the intermediary that accepts power from the charging station and ensures that the battery gets charged efficiently and safely. The BMS controls the rate at which the battery pack is charged, equalizing cell voltages and ensuring temperatures do not rise up dangerously. Since BMS of each make/model vary in their characteristics, we can expect a resultant difference in charging rates, even with cars of the same battery capacity at the same charging station.</p>



<p id="9424">The State of Charge (SoC) or battery level before starting the charging operation has an obvious impact on the overall charging time. A battery would obviously take the longest time to fully charge when it in a fully discharged condition. To compensate for variations in the start SoC % and the end SoC % across different measurements, the metric “% charge added per charging time” or the charging rate (d/dt), is found more useful. That means we consider only the middle range of charge between 10% (or 20%) and 80%, and we measure what % of the battery gets charged (on an average, across multiple measurements, on the same battery), in how many minutes of charging time. One could argue that “range added per charging time”, a range rate metric, as used by many OEMs is a better metric. For instance, delivering 160 km of range in 3 minutes of charging. However, the range rate metric would also include the overall efficiency of the EV itself, including that of its traction motor, transmission system, regenerative braking etc., and therefore it wouldn’t be an accurate metric of battery charging rate per se.</p>



<p id="38a8">So how are Fast Chargers tested before they get approval for public use? At SFO Technologies (the flagship company of NeST group), we test our 50kW DC Fast Charger design by simulating a car battery. Setting a (virtual) battery capacity of 30.2kWh (similar to Tata Nexon EV), it takes typically around 26 minutes to charge from 10% to 80% of (virtual) battery level. Since there is no real BMS in this test setup, this virtual d/dt reading cannot be compared to the charging time of a real car battery. Certification by the Automotive Research Association of India (ARAI) is expected in Q2 of 2023, after which charging times with actual EVs, like Tata Nexon, Hyundai Kona etc. could be measured.</p>



<h2 class="wp-block-heading" id="c364"><strong>Industry trends and issues</strong></h2>



<p id="4445">The industry has so far been approaching resolution of charging time by pushing steadily for Fast Charging and more recently Ultra-Fast Charging, led by the iconic Tesla superchargers. There are however a few issues involved, the first to hit users being the charging cost. Compared to the cost of AC charging, the average charging cost for the user increases 4 to 6-fold for Fast charging and even more for Ultra-Fast charging. Infrastructure costs for the charging operator are also considerably higher for Fast Charging stations, and even more so for Ultra-Fast Charging stations. The latter may need the input feeder power equivalent of 5–6 households given their huge power rating, for instance the Terra360 delivers a whopping 360kW!</p>



<p id="c6bd">(**) However, launches of the likes of Terra360 do not address the “prime accused” of all adoption hurdles — range anxiety! That is where the battery chemistry wars are being fought today for improving EV range. Another parallel approach ongoing is to improve the density of charging infrastructure and predictability of its location, availability and compatibility, especially in vast geographies like India.</p>



<p id="65eb">Another issue with Ultra-Fast Chargers is EV compatibility. Although Tesla eventually pivoted their proprietary super chargers to support the European standard (with CCS Combo2 outlet) in their European installations, the general compatibility across EV makes/models is still very limited. While a few manufacturers like ABB and Tesla have been focused on steadily increasing the charging capacity of their charging stations, it remains a tall order for the highly fragmented EV and battery manufacturing segments, who have been lagging in making major breakthroughs in battery design, to absorb the high rate of energy efficiently as well as safely. As a result, a large spectrum of EVs continues to remain incompatible with these Ultra-Fast Chargers. So, although ABB Terra360 did launch in 2021, the day when you and I could get fully charged under 15 minutes no matter the make/model of EV, is still a while in the future.</p>



<p id="1714">Finally, at the physical level Ultra-Fast charging involves large currents in the 400A — 500A range flowing through the charging cable/connector that raises a lot of heat. Forced liquid cooling of the charging cables becomes mandatory, without which temperatures could shoot up dangerously. While occasional fast charging is generally considered safe for batteries, repeated fast charging (and ultra-fast charging) that elevates battery temperatures sharply and frequently, is known to be detrimental to the State of Health (SoH) or battery life. Given the imperfections of the BMS design, especially at extremes of ambient temperature or with mismatched cells, this has a potential to impact battery life.</p>



<h2 class="wp-block-heading" id="df90"><strong>Consumer concerns</strong></h2>



<p id="1b0b">Incidentally, high battery cost is the next in line to “range anxiety” among the adoption hurdles. The battery subsystem cost today stands at almost half the cost of the EV or more. In a price-sensitive market such as India where the vast majority of consumers still view buying a car as a lifetime investment, and the maximum OEM battery warranty is still only around 8 years or 160000 kms, the prospect of depreciation of the EV at the end of battery life/warranty is paralyzing! It is hardly surprising that even after several incentive schemes from different tiers of government, the much-awaited electric revolution is yet to flood a large market like India. And no wonder why the ABB Terra360 didn’t raise millions of eyebrows on the subcontinent!</p>



<p id="5155"><strong>Conclusion</strong></p>



<p id="c248">In conclusion, the cost of fast charging which depends on the utility tariffs and pricing plans set by charging infrastructure operators may eventually start to come down as demand picks up as well as density of charging infrastructure gets better. As Ultra-Fast charging technologies get more impetus from charger manufacturers, compatibility across EVs would probably continue to lag for some more time, since advances in battery design would take an independent cycle time to achieve. Meanwhile, the temperature and safety issues of Ultra-Fast chargers associated with the transfer of very high power will need to be assured for quick uptake among operators. Going by the industry’s pace of innovation in fast charging technologies, could the day be far off when one is not quite sure which one charges faster — a smartphone or an electric car!</p>



<p id="be2d"><a href="https://medium.com/tech-blogs-by-nest-digital/demystifying-data-mesh-9a34ad69108f?source=author_recirc-----7f677cc6ad74----1---------------------26e9a463_7e86_478c_b25a_ca475df1167f-------"></a></p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/the-d-dt-of-ev-charging/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Detecting Car Damage using YOLO</title>
		<link>https://nestdigital.com/blogs/detecting-car-damage-using-yolo/</link>
					<comments>https://nestdigital.com/blogs/detecting-car-damage-using-yolo/#respond</comments>
		
		<dc:creator><![CDATA[Atri Saxena]]></dc:creator>
		<pubDate>Mon, 24 Jul 2023 15:02:32 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4508</guid>

					<description><![CDATA[You might have heard of ADAS (Advanced driver assistance systems) in many cars nowadays, which are smart enough to detect the human in front of the car and apply brakes automatically. Have you thought what is the technology behind that? Leading car Manufacturers have stepped in to integrate ADAS into their cars. Existing ADAS technologies [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<p id="be2d">You might have heard of ADAS (Advanced driver assistance systems) in many cars nowadays, which are smart enough to detect the human in front of the car and apply brakes automatically. Have you thought what is the technology behind that? Leading car Manufacturers have stepped in to integrate ADAS into their cars. Existing ADAS technologies operate on visual cameras, RADARs, and LiDARs for the object detection. ADAS mainly depends on features such as high speed, high accuracy, low cost, and low power consumption.</p>



<p id="8b38">In this blog, we will talk about the real-time Object Detection technique YOLO (You Look Only Once). Not only that, I will share how YOLO can help us detect damage in the Car.</p>



<h2 class="wp-block-heading" id="0ecb">What is YOLO?</h2>



<p id="b84a">YOLO or You Look Only Once is a popular Object Detection technique. That means, it performs two tasks&nbsp;<strong>Object Classification</strong>&nbsp;&amp;&nbsp;<strong>Object Localization.</strong>Since, there are two tasks many Object detection algorithms such as R-CNN, Fast RCNN, Faster RCNN are using two-step or two neural networks. But as the name itself defines, YOLO — looks at the entire image at once, and only once which allows it to capture the context of detected objects. Due to the single network, it is much faster than other object detection algorithms and can perform real-time detection at 45 frames per second.</p>



<p id="4e73">There are various versions of YOLO you will find out, the first version was released in 2016, and version 3 which is discussed here was created in 2018. The official successors of YOLOv3 are YOLOv4, and the newly released YOLOv7, which is the current state-of-the-art object detector in 2022.</p>



<h2 class="wp-block-heading" id="45cc">YOLOv1 Architecture</h2>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*9ZlcXLNrbm_3WRhq_vPqoA.png" alt=""/><figcaption class="wp-element-caption">YOLO architecture from&nbsp;<a href="https://arxiv.org/pdf/1506.02640.pdf" rel="noreferrer noopener" target="_blank">original paper&nbsp;</a>modified by Author</figcaption></figure>



<p id="e348">The architecture works as follows:</p>



<ul>
<li>Resizing the Input image to 448 x 448 before going through the convolutional network.</li>



<li>In total, it contains 24 convolutional layers followed by 2 fully connected layers.</li>



<li>Uses 1&#215;1 convolution layers to reduce the channels, followed by 3&#215;3 convolutional.</li>



<li>Softmax is used for class predictions.</li>
</ul>



<h2 class="wp-block-heading" id="93b0">Difference between YOLOv1 and YOLOv3 Architecture</h2>



<ul>
<li>YOLOv3 uses 53 Convolutional layers and skip connections.</li>



<li>YOLOv3 uses logistic regression with binary cross-entropy loss. Since, there is possibility two classes(men &amp; Person) are there for a single box and using softmax imposes that each box has exactly one class which is mostly not the case.</li>
</ul>



<h2 class="wp-block-heading" id="aca7">How YOLO works?</h2>



<p id="7c18">Now you have understood the architecture, let&#8217;s try to understand how the YOLO algorithm works actually.</p>



<p id="6bf5">“<em>Let’s suppose we have built a YOLO Model to detect the damage in the car.</em></p>



<p id="bb95"><em>You will understand the whole process of how YOLO performs object detection; how to get image (B) from image (A)”</em></p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1322/1*3USXPnvUlUvtm8iiUfxZjg.png" alt=""/></figure>



<p id="c5ef">YOLO Algorithm works on the following four approaches:</p>



<ul>
<li><strong>Residual blocks</strong></li>



<li><strong>Bonding box regression</strong></li>



<li><strong>Intersection over Union (IoU)</strong></li>



<li><strong>Non-Maximum supression</strong></li>
</ul>



<ol>
<li><strong>Residual Blocks</strong></li>
</ol>



<p id="cc92">YOLO works on the idea of segmentation of the image into smaller parts. The image is divided into square grid of size SxS like:</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:908/1*0302JPOs_gq3CEERZL32Fg.png" alt=""/></figure>



<p id="feb4">The cell in which the center of the object is the cell responsible for detecting that object.</p>



<p id="11cf"><strong>2. Bonding box Regression</strong></p>



<p id="97c9">The next step is to determine the bonding boxes, each cell can have B bounding boxes. The value of B can be determined while creating model architecture.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1032/1*ONX754OSnxCnBp-Yy_el8A.png" alt=""/></figure>



<p id="a7e3">YOLO determines the values of these bonding boxes using a single regression module. Each of the bonding boxes are made up of 5 numbers + N class scores: confidence of box, x position, y position, width, height, and class score. Here confidence score will be between 0.0 and 1.0 with 0.0 means that there is no object in that cell and 1.0 means model is certain there is an object. x and y are the center of the predicted bounding box and width &amp; height are the fractions relative to the image size. Class score are confidence of particular class.</p>



<p id="65ac"><strong>3. Intersection over Union (IoU)</strong></p>



<p id="8ca6">Many times, a single image can have multiple boxes for a single object. IoU helps to find the most relevant box. IoU values lies between 0 and 1. IoU is the area of the Intersection of predicted and ground truth boxes divided by the area of the Union of predicted and ground truth boxes.</p>



<ul>
<li>The user can define the threshold value for IoU such as 0.5.</li>



<li>Thereafter, it ignores boxes with IoU ≤ 0.5 and only considers boxes with IoU &gt; 0.5.</li>
</ul>



<p id="142e"><strong>4. Non-Max Supression</strong></p>



<p id="ef13">Even after applying the IoU technique, there is a possibility that there are more than one boxes for an object. For dealing with that we choose the box with the highest value of confidence score of detection and suppress the Non-max values.</p>



<p id="e5c2">Therefore, the model finally predicts&nbsp;<strong><em>S × S × (C + B&nbsp;</em>∗ 5<em>).</em></strong></p>



<p id="cc48">S = No of grids</p>



<p id="64ef">C = Number of classes</p>



<p id="9ace">B= Number of bonding boxes per grid cell.</p>



<h2 class="wp-block-heading" id="91fc">YOLO Training — Damage detection</h2>



<p id="af52">For the training of damage detection in cars, we have used the dataset available on Kaggle:&nbsp;<a href="https://www.kaggle.com/datasets/lplenka/coco-car-damage-detection-dataset" rel="noreferrer noopener" target="_blank">MS COCO car damage detection.</a></p>



<p id="92a7">This dataset contains 59 train images, 11 validation images, and 8 test images.</p>



<p id="673c">As we can see data is too small. For that, we have used a pre-trained YOLO model on the MS COCO dataset which contains 80 categories. We have replaced the final layers and freezed the rest of the model. Then trained for 100 epochs with data augmentation.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*qNP3D8tHBPf-P3_RemLe4A.png" alt=""/></figure>



<p id="69e2">Here in the results, we can there are many overlaps, and the probability is also low. Since training data was very low and the pre-trained model was trained on various 80 kinds of class images, therefore, Model was not able to learn much. We can collect more images and manually annotate them to get better accuracy and results.</p>



<p id="c24b">We can use this damage detection model in Insurance Applications by detecting the damage to the car in an accident which can help users to claim insurance online. And Insurance companies also can save a lot of money since I believe if Machine Learning is not growing business value it is not useful to spend time and money on Machine Learning.</p>



<h2 class="wp-block-heading" id="bb4d">Conclusion</h2>



<p id="d5dc">In this blog, we have learned the architecture and working of YOLO algorithms and also seen how YOLO can be used in the industry of Automobiles with Car Damage detection dataset. There are various industries where object detection can be applied such as warehouses, Automated Industries, Healthcare, etc.</p>



<p id="5867">As always, drop me a line in the comments if you have any doubts or can be helpful in any way! 😁</p>



<h2 class="wp-block-heading" id="bfac">Further Reading</h2>



<ol>
<li><a href="https://pjreddie.com/media/files/papers/YOLOv3.pdf" rel="noreferrer noopener" target="_blank">YOLO v3: An incremental improvement</a></li>



<li><a href="https://arxiv.org/pdf/1506.02640.pdf" rel="noreferrer noopener" target="_blank">You Only Look Once: Unified, Real-Time Object Detection</a></li>
</ol>



<p><a href="https://medium.com/tag/machine-learning?source=post_page-----7f677cc6ad74---------------machine_learning-----------------"></a></p>



<p><a href="https://medium.com/tech-blogs-by-nest-digital/demystifying-data-mesh-9a34ad69108f?source=author_recirc-----7f677cc6ad74----1---------------------26e9a463_7e86_478c_b25a_ca475df1167f-------"></a></p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/detecting-car-damage-using-yolo/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>eCall</title>
		<link>https://nestdigital.com/blogs/ecall/</link>
					<comments>https://nestdigital.com/blogs/ecall/#respond</comments>
		
		<dc:creator><![CDATA[Radhika Krishnan]]></dc:creator>
		<pubDate>Mon, 24 Jul 2023 11:53:59 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4501</guid>

					<description><![CDATA[Have you ever noticed the SoS button in the new generation cars? Have you thought about the benefits of the “internet-enabled” cars apart from the integrated maps and the fancy features explained by executives? Here is a feature or technology that comes helpful for a passenger — eCall or Emergency Call. For any vehicle, if [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<p id="9b40">Have you ever noticed the SoS button in the new generation cars? Have you thought about the benefits of the “internet-enabled” cars apart from the integrated maps and the fancy features explained by executives? Here is a feature or technology that comes helpful for a passenger — eCall or Emergency Call.</p>



<p id="cd52">For any vehicle, if it is in running condition, we should think about the possibility of an emergency. If there is an emergency, be it an accident or an intruder or a medical condition, or any possibility you can think about, where the passengers are unable to get the vehicle to a safe place, it will be of great relief if a supporting team can reach the place with the required help. eCall is developed to handle such situations.</p>



<p id="56d2">The cellular connectivity to place the eCall and GPS connectivity to access the vehicle location are the main requirements for a vehicle to implement eCall. This is a mandatory feature for vehicles in many countries and there are specifications defined for eCall.</p>



<p id="7065">eCall is designed in such a way that it can be triggered automatically when there is an accident, by sensing the deployment of airbags or by pressing the SoS button manually if the emergency is of any other sort. Other than the trigger initiation, both eCall work in the same way.</p>



<figure class="wp-block-image"><img decoding="async" src="https://miro.medium.com/v2/resize:fit:1400/1*Z1Uor9DWm8rZJZWTSpyOGw.png" alt=""/><figcaption class="wp-element-caption">eCall overview (Source: European Commission)</figcaption></figure>



<p id="f28a">The participants of an eCall are a vehicle, a circuit-switched cellular network, and a Public Safety Answering Point (PSAP).</p>



<p id="54d7">In the event of an emergency, the eCall system manually or automatically triggers an emergency voice call between the passenger and the Public Safety Answering Point(PSAP) accessible through widely spread emergency numbers and often accessible through fixed and mobile telephone — 112 in Europe, 911 in the United States. Apart from this the system also transfers a data message from the Vehicle to PSAP which is denoted as eCall Minimum Set of Data(MSD). The MSD includes location information, time stamp, number of passengers (with reference to number of engaged seat belts), driving direction, vehicle Identification Number (VIN), and other relevant information.</p>



<p id="37e1">The operator at the PSAP will be able to set up a voice call with the vehicle and talk to the passengers and verify the exact problems so that the appropriate measures can be taken to inform the ambulance or police.</p>



<h2 class="wp-block-heading" id="e705"><strong>Technical aspects of eCall implementation:</strong></h2>



<p id="be91">The major specifications that are to be considered when developing an eCall solution are:</p>



<ol>
<li>EN 16072 (Pan-European eCall operating requirements)</li>



<li>EN 16062 (eCall high-level application requirements (HLAP) using GSM/UMTS circuit-switched networks)</li>



<li>EN 15722 (ECall minimum set of data)</li>



<li>EN 16454 (End-to-End Conformance Testing requirements)</li>
</ol>



<p id="187b">You can derive the requirements and validate them against these specifications so that it will be easier when the conformance testing is done.</p>



<p id="3933">The challenge in developing an eCall application is that there are very strict timing requirements for communicating with PSAP and all these requirements shall be met to get the solution certified. Both hardware and software-integrated solution is the best way to achieve this.</p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/ecall/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>All About Self-Driving Cars</title>
		<link>https://nestdigital.com/blogs/all-about-self-driving-cars/</link>
					<comments>https://nestdigital.com/blogs/all-about-self-driving-cars/#respond</comments>
		
		<dc:creator><![CDATA[Reshma Miriam]]></dc:creator>
		<pubDate>Mon, 24 Jul 2023 11:32:08 +0000</pubDate>
				<category><![CDATA[BLOGS]]></category>
		<category><![CDATA[Mobility]]></category>
		<guid isPermaLink="false">https://newwebsite.nestdigital.com/?p=4495</guid>

					<description><![CDATA[INTRODUCTION Self-driving cars- It seems like a concept from the future or a sci-fi movie. But this future is right around the corner. We are heading into a future, where we can let our cars drive us to our destination. There is a lot of hype around self-driving cars and Global tech giants are making [&#8230;]]]></description>
										<content:encoded><![CDATA[<div id="bsf_rt_marker">
<h2 class="wp-block-heading" id="7228">INTRODUCTION</h2>



<p id="7228">Self-driving cars- It seems like a concept from the future or a sci-fi movie. But this future is right around the corner. We are heading into a future, where we can let our cars drive us to our destination. There is a lot of hype around self-driving cars and Global tech giants are making significant strides in technologies that will make fully autonomous vehicles a reality.&nbsp;<br>Self-driving cars or autonomous vehicles are vehicles that can sense their environment and operate without human intervention. A human need not take control of the vehicle or be present at all times. There are several types depending on the levels of automation.</p>



<h2 class="wp-block-heading" id="d45b">LEVELS OF AUTOMATION</h2>



<p id="d45b">There are currently 6 levels of Automation, as per the Society of Automotive Engineers (SAE), ranging from Level 0 to Level 5. As the levels increase, the extent of automation increases accordingly.&nbsp;<br><br>•&nbsp;<em>Level 0:</em>&nbsp;Most vehicles that we see on the road are at Level 0. That is, a human does the driving without any assistance. Example: Ford Model T&nbsp;</p>



<p id="d45b"><br>•&nbsp;<em>Level 1</em>&nbsp;(Driver Assistance): This level incorporates the lowest level of automation, with the vehicle controlling at least one function such as cruise control or emergency brake assistance. Example: Cruise Control Feature&nbsp;</p>



<p id="d45b"><br>•&nbsp;<em>Level 2</em>&nbsp;(Partial Automation): It applies to vehicles with Advanced Driver Assistance Systems. The vehicle would control more than one autonomous function such as steering and accelerating. Yet, at this level, it is required the driver should remain alert and engaged at all times. Eg: Tesla Autopilot&nbsp;</p>



<p id="d45b"><br>•&nbsp;<em>Level 3</em>&nbsp;(Conditional Automation): The automated driving system has environment detection capability and can perform tasks but it is still required for the human to be in control. Eg: Uber Self-Driving Car.&nbsp;</p>



<p id="d45b"><br>•&nbsp;<em>Level 4</em>&nbsp;(High Automation): This level is referred to as High Driving Automation. Vehicles at this level can operate in self-driving mode. It can monitor the surroundings and the ADS (Automated Driving System) is reliable to such an extent that the human driver need not pay attention. Eg: Waymos Autonomous Vehicle&nbsp;</p>



<p id="d45b"><br>•&nbsp;<em>Level 5</em>&nbsp;(Full Automation): These are Fully Autonomous vehicles that do not require any human intervention at all. These vehicles are undergoing testing in many different parts of the world. Since these vehicles require no human input, Prototypes of fully autonomous vehicles have no steering wheel or pedals.</p>



<h2 class="wp-block-heading" id="5454">ADVANTAGES OF AUTONOMOUS VEHICLES</h2>



<p id="5454"><strong>Reduces Accidents</strong>: 90 percent of most road accidents are due to human error. Autonomous Vehicles are a game-changer in this regard. They are much safer since they are not affected by illness or fatigue. These vehicles are attentive and are constantly scanning in multiple directions.</p>



<p id="524e"><strong>Access for the elderly and physically disabled</strong>: Fully Autonomous vehicles would require no human intervention hence self-driving vehicles will be all-inclusive.</p>



<p id="a005"><strong>Effective taxis</strong>: Autonomous Vehicles are advantageous for the public transportation sector and they can also be used effectively as Robo taxis.It is estimated that the waiting time for a taxi will come down from 5 minutes to 36 seconds.</p>



<p id="c083"><strong>Traffic Efficiency</strong>: Autonomous Vehicles have been shown to reduce traffic congestion and improve traffic capacity. This, in turn, can reduce travel time and cut down transportation costs.</p>



<p id="455d"><strong>Decreases environmental pollution</strong>: Reduced Traffic Congestion will lead to reduced carbon dioxide emissions.</p>



<p id="3e85"><strong>Efficient Parking</strong>: Autonomous Vehicles eliminate the need for parking. The passengers will be dropped off at the location and the vehicle would park away from the location- somewhere space is available.&nbsp;</p>



<h2 class="wp-block-heading" id="3e85">CHALLENGES IN THE ADOPTION OF AUTONOMOUS VEHICLES</h2>



<p><strong>Accident Liability</strong>: Who would be responsible for accidents caused by self-driving cars. Would it be the passenger or the car manufacturer? In cases where self-driving requires the presence of a driver, the driver would be responsible, even if the car was driving itself. On the other hand, for Fully Autonomous vehicles, the liability for accidents would fall on the car manufacturer and software designer. Since this technology is new, lawsuits related to driverless cars are analysed case by case.&nbsp;<br><br><strong>Weather</strong>: Bad weather such as snow, heavy rain or fog makes it challenging for the vehicle’s sensors to function properly. In such a situation, passenger safety is impacted. In the future, technology can overcome these challenges.&nbsp;<br><br><strong>Cybersecurity</strong>: Data privacy is a major concern and consumers’ data must be protected from hackers. Cybersecurity should be strengthened to safeguard consumer data transmitted through a cloud-based platform.</p>



<p id="8db9"><strong>Road Conditions</strong>: The condition of roads is unpredictable. It differs from place to place, with it being perfect in one place but deteriorating elsewhere. For example Lack of lane Markings, potholes, and tunnel roads may create a problem for Autonomous Vehicles.</p>



<h2 class="wp-block-heading" id="5d98">HOW DO SELF-DRIVING CARS SEE</h2>



<p id="5d98">Self-driving cars are highly technologically advanced. They work with a combination of both hardware and software to navigate their environment.</p>



<p id="9612"><strong>RADAR</strong>&nbsp;(Radio Detection and Ranging)- Radar can detect objects despite adverse weather conditions since it consists of radio waves. It ensures that the vehicle can obtain details on the object’s range and velocity.<br><br><strong>LIDAR</strong>&nbsp;(Light Detection and Ranging) enables vehicles to scan their surroundings with lasers. It helps vehicles detect even the smallest objects with high precision. They can calculate the distance to objects by measuring the time it takes for the reflected light beam to fall on a photodetector and create a detailed 3D map of the surroundings. However, it is unreliable in adverse weather conditions.<br><br><strong>CAMERA</strong>&#8211; High-resolution digital cameras can visualize the environment. Computer vision takes various input data such as video segments and camera images from different angles. Tesla cars have 8 external cameras.<br><br>In addition to the above, ultrasonic sensors and inertial sensors are used. Self-driving cars need immense processing power, hence they leverage Graphical Processing Units (GPUs) as well.</p>



<h2 class="wp-block-heading" id="9612">HOW DO THEY WORK</h2>



<p id="9612">Autonomous cars consist of numerous sensors that collect input data. This input data is processed with machine learning algorithms. In addition, neural networks can detect patterns in data. The more the data, the better the self-driving algorithms get.<br><br><strong>Map Building</strong>: The vehicles create a map of the surroundings by combining input from sensors and digital maps. They plan routes based on these inputs to reach the destination.<br><br><strong>Planning a Path</strong>: The vehicle plans a path that is the quickest route to the entered location. It takes into account not only navigation but also static and dynamic obstacles.<br><br><strong>Avoiding Obstacles</strong>: The vehicles can avoid all static and dynamic objects. Utilizing Machine Learning it detects the identity of certain objects. This helps it to know its predicted behavior. Certain other objects are hidden and not scannable by the vehicle. Hence self-driving cars will constantly be in communication with each other. If one vehicle encounters an object, other vehicles are also alerted.<br><br>Some real-world examples of self-driving cars are Tesla Autopilot, Waymo, and Roborace.</p>



<p id="88b4"><strong>WRAPPING UP</strong><br>Researchers estimate that self-driving cars will become common by 2030 and have the potential to replace other vehicles by the year 2050. It will revolutionize the transportation industry and in turn, our daily lives. In conclusion, Autonomous driving will open up endless possibilities and will enable us to reimagine mobility.&nbsp;<br><br><strong>REFERENCES</strong>:&nbsp;<br>1.<a rel="noreferrer noopener" href="https://www.techtarget.com/searchenterpriseai/definition/driverless-car" target="_blank">https://www.techtarget.com/searchenterpriseai/definition/driverless-car</a><br>2.<a rel="noreferrer noopener" href="https://interestingengineering.com/how-do-self-driving-cars-work" target="_blank">https://interestingengineering.com/how-do-self-driving-cars-work&nbsp;</a><br>3.<a rel="noreferrer noopener" href="https://history-computer.com/self-driving-cars-guide/" target="_blank">https://history-computer.com/self-driving-cars-guide/&nbsp;</a><br>4.<a rel="noreferrer noopener" href="https://www.iotforall.com/how-do-self-driving-cars-work" target="_blank">https://www.iotforall.com/how-do-self-driving-cars-work</a></p>
</div>]]></content:encoded>
					
					<wfw:commentRss>https://nestdigital.com/blogs/all-about-self-driving-cars/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>
