{"id":2640,"date":"2023-05-13T16:40:27","date_gmt":"2023-05-13T11:10:27","guid":{"rendered":"https:\/\/newwebsite.nestdigital.com\/?p=2640"},"modified":"2023-08-05T16:22:35","modified_gmt":"2023-08-05T10:52:35","slug":"lakehouse-new-kid-in-data-town","status":"publish","type":"post","link":"https:\/\/nestdigital.com\/blogs\/lakehouse-new-kid-in-data-town\/","title":{"rendered":"Lakehouse \u2014 New kid in data town"},"content":{"rendered":"\n<p>As the data volume generated by the new digital era platforms are continuously and exponentially increasing and the insights generated from the data is becoming more and more valuable and critical, there are a bunch of architecture innovations and reforms happening. In this article we will have a close look at one of the most disrupting architecture in data analytics space.<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>Let\u2019s have a look at a traditional data analytics platform<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img decoding=\"async\" loading=\"lazy\" src=\"https:\/\/newwebsite.nestdigital.com\/wp-content\/uploads\/2023\/05\/image1.png\" alt=\"\" class=\"wp-image-2641\" width=\"670\" height=\"681\" srcset=\"https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/image1.png 741w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/image1-295x300.png 295w\" sizes=\"(max-width: 670px) 100vw, 670px\" \/><\/figure>\n\n\n\n<p class=\"has-text-color has-small-font-size\" style=\"color:#808080\">Image 1 : Data analytics platform powered by data lake and data warehouse<\/p>\n\n\n\n<p>The core components in the above architecture data ingestion, data lake, ETL and a data warehouse. <strong>Data lake<\/strong> and <strong>data warehouse<\/strong> are similar and different at the same time. The similarity is basically they are storage platforms for keeping the data. Now let\u2019s look at the differences.<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"889\" height=\"357\" src=\"https:\/\/newwebsite.nestdigital.com\/wp-content\/uploads\/2023\/05\/Image2.png\" alt=\"\" class=\"wp-image-2642\" srcset=\"https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image2.png 889w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image2-300x120.png 300w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image2-768x308.png 768w\" sizes=\"(max-width: 889px) 100vw, 889px\" \/><\/figure>\n\n\n\n<p class=\"has-text-color has-small-font-size\" style=\"color:#808080\">Table 1 : Data lake vs Data warehouse<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>The million-dollar question \u2014 Is there a way to combine data lake and data warehouse?<\/strong><\/p>\n\n\n\n<p>Obviously, someone would ask. \u201cCan we have a platform which can serve both as data lake and data warehouse\u201d ? <strong>The answer is \u201cData lakehouse\u201d<\/strong><\/p>\n\n\n\n<p>Data lakehouse is a new architecture that emerged recently which combines the best of both data lake and data warehouse. In a nutshell, data lakehouse enables<\/p>\n\n\n\n<ol>\n<li>ACID compliance and full transactional update capabilities on data lake<\/li>\n\n\n\n<li>High performance query execution<\/li>\n\n\n\n<li>Data science and data engineering workloads<\/li>\n\n\n\n<li>Unified real-time and batch data processing<\/li>\n\n\n\n<li>Schema enforcement and data governance<\/li>\n<\/ol>\n\n\n\n<figure class=\"wp-block-image size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"814\" height=\"604\" src=\"https:\/\/newwebsite.nestdigital.com\/wp-content\/uploads\/2023\/05\/Image3.png\" alt=\"\" class=\"wp-image-2643\" srcset=\"https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image3.png 814w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image3-300x223.png 300w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image3-768x570.png 768w\" sizes=\"(max-width: 814px) 100vw, 814px\" \/><\/figure>\n\n\n\n<p class=\"has-text-color has-small-font-size\" style=\"color:#808080\">Image 2 : Simplified view of data lakehouse<\/p>\n\n\n\n<p>As you can see in the diagram, lake house storage acts as both data lake and data warehouse. This is a very simplified version of the architecture. We will now look at a few of the innovations and software products that made this architecture possible. They are quite interesting.<\/p>\n\n\n\n<p>As you can see in the diagram, lake house storage acts as both data lake and data warehouse. This is a very simplified version of the architecture. We will now look at a few of the innovations and software products that made this architecture possible. They are quite interesting.<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>Some popular early players (they are still very popular)<\/strong><\/p>\n\n\n\n<p><strong>Apache Presto:<\/strong> An open-source, distributed SQL querying platform that runs on a cluster of machines. Originated at Facebook, Presto is now one of the popular query engines out there. It enables analytics using ANSI SQL on large amounts of data stored in a variety of systems such as HDFS, cloud storage, NoSQL stores etc. Presto enables data warehouse like query performance for BI and reporting tools.<\/p>\n\n\n\n<p><strong>Apache Drill:<\/strong> Similar to Apache Presto, Drill is another open-source SQL query engine for Big Data exploration. Drill is designed from the ground up to support high-performance analysis on the semi-structured and rapidly evolving data coming from modern Big Data applications, using ANSI SQL. Drill originated at MapR (now acquired by HP Enterprise) and is based on Google\u2019s Dremel.<\/p>\n\n\n\n<p>Both Presto and Drill are Apache top level projects<\/p>\n\n\n\n<p><strong>Amazon Athena:<\/strong> This is an AWS native version of Presto. It provides all functionalities of Presto but there is no need to install or manage the infrastructure. You will only have to pay for the queries fired and the data scanned. Even though Athena is meant to query data stored in AWS S3 data lake, federated queries along with source connectors can be used to query a large variety of data sources.<\/p>\n\n\n\n<p><strong>Amazon Redshift Spectrum:<\/strong> Another AWS product based on Amazon Redshift, popular data warehouse product offering from Amazon. Redshift spectrum leverages the parallel processing capabilities available in an already provisioned Redshift cluster to connect and query data available in Amazon S3 storage.<\/p>\n\n\n\n<p><strong>Google BigQuery:<\/strong> Based on Google\u2019s Dremel, it is a data warehouse offering from Google cloud. Unlike a typical data warehouse solution, BigQuery supports machine learning workloads using BigQuery ML. It can also connect to external big data storage systems to query data using Federated queries.<\/p>\n\n\n\n<p>As you can see, there are a variety of products available. But none of them truly possess all the capabilities of a data lake house.<\/p>\n\n\n\n<blockquote class=\"wp-block-quote\">\n<p class=\"has-black-color has-text-color\"><em>The capabilities of ACID transactions are limited to none. Most of these work on immutable storage and updating records is impossible. Also, it is difficult to achieve a unified real-time and batch data layer. Moreover, we require different storage solutions for meeting all our requirements and that deviates from the concept of single data storage for both data lake and data warehouse. players (they are still very popular)<\/em><\/p>\n<\/blockquote>\n\n\n\n<p><\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>Delta Lake, Apache Iceberg and Apache Hudi<\/strong><\/p>\n\n\n\n<p>These platforms implement data lakehouse using a metadata layer based on open table formats on top of the data lake storage solutions such as HDFS, AWS S3, Azure Blob, Google Cloud Storage etc.<\/p>\n\n\n\n<p><strong>Delta Lake:<\/strong> Delta lake was created by Databricks and then open sourced. It is based on the popular file format Apache Parquet and uses transaction logs created as JSON files to support ACID transactions on the data lake. Delta format is supported by many data processing frameworks which can now leverage this framework to enable data warehouse capabilities on the existing data lake storage systems. Other key features include<\/p>\n\n\n\n<p>Scalable metadata on billions of partitions and files with ease<\/p>\n\n\n\n<p>Time travel to old data for audit or rollback<\/p>\n\n\n\n<p>Unified batch\/streaming with transaction capabilities<\/p>\n\n\n\n<p>Schema evolution\/Enforcement \u2014 Prevent bad data<\/p>\n\n\n\n<p>Audit history using transaction logs for full audit trial<\/p>\n\n\n\n<p>DML operations \u2014 SQL, Scala\/Java and Python APIs to merge, update and delete datasets<\/p>\n\n\n\n<p><strong>Apache Iceberg:<\/strong> Another open-source project which was initially developed at Netflix and currently an Apache top level project. Apache Iceberg is an open table format designed for huge, petabyte-scale tables. The function of a table format is to determine how you manage, organize and track all of the files that make up a table. It supports multiple file formats such as Apache Parquet, Apache Avro and Apache ORC. Using a combination of metadata, manifest and data files, ACID transactions are supported on data lake storage. Other capabilities include<\/p>\n\n\n\n<p>Full schema evolution to track changes to a table over time<\/p>\n\n\n\n<p>Time travel to query historical data and verify changes between updates<\/p>\n\n\n\n<p>Partition layout and evolution enabling updates to partition schemes as queries and data volumes change without relying on hidden partitions or physical directories<\/p>\n\n\n\n<p>Rollback to prior versions to quickly correct issues and return tables to a known good state<\/p>\n\n\n\n<p>Advanced planning and filtering capabilities for high performance on large data volumes<\/p>\n\n\n\n<p><strong>Apache Hudi:<\/strong> Open-source product initially developed at Uber. Hudi (Hadoop Upsert Delete and Incremental) initially started as a streaming data lake platform on top of Apache Hadoop. It has evolved a lot now to support incremental batch jobs on any cloud storage platform. Hudi uses Apache Parquet and Apache Avro and enables ACID transaction capabilities. Other features include<\/p>\n\n\n\n<p>Upserts, Deletes with fast, pluggable indexing<\/p>\n\n\n\n<p>Transactions, Rollbacks, Concurrency Control<\/p>\n\n\n\n<p>Automatic file sizing, data clustering, compactions, cleaning<\/p>\n\n\n\n<p>Built-in metadata tracking for scalable storage access<\/p>\n\n\n\n<p>Incremental queries, Record level change streams<\/p>\n\n\n\n<p>Backwards compatible schema evolution and enforcement<\/p>\n\n\n\n<p>SQL Read\/Writes from data processing frameworks such as Spark, Presto, Trino, Hive &amp; more<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>Products for Enterprise<\/strong><\/p>\n\n\n\n<p>Now let\u2019s look at some enterprise offerings:<\/p>\n\n\n\n<p><strong>Delta lakehouse by Databricks:<\/strong> Based on the delta lake and developed by Databricks which can run on popular cloud providers. The entire platform is powered by Apache Spark, the most popular data processing platform in the market now. By combining the capabilities of Delta lake and Apache Spark, delta lakehouse provides capabilities such as<\/p>\n\n\n\n<p>Lightning-fast performance for data processing with auto scaling and indexing<\/p>\n\n\n\n<p>Data science and machine learning workloads at scale using MLflow<\/p>\n\n\n\n<p>Databricks SQL, which is server less SQL query execution engine exclusively for ultra-fast BI and dashboarding requirements<\/p>\n\n\n\n<p>Unity catalog \u2014 A unified data catalog for all data in the delta lakehouse which also provides data governance and security capabilitiesBuilt-in dashboarding platform to create reports and visualizations<\/p>\n\n\n\n<p>Built-in dashboarding platform to create reports and visualizations<\/p>\n\n\n\n<figure class=\"wp-block-image size-full\"><img decoding=\"async\" loading=\"lazy\" width=\"721\" height=\"801\" src=\"https:\/\/newwebsite.nestdigital.com\/wp-content\/uploads\/2023\/05\/Image4.png\" alt=\"\" class=\"wp-image-2644\" srcset=\"https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image4.png 721w, https:\/\/nestdigital.com\/wp-content\/uploads\/2023\/05\/Image4-270x300.png 270w\" sizes=\"(max-width: 721px) 100vw, 721px\" \/><\/figure>\n\n\n\n<p class=\"has-text-color has-small-font-size\" style=\"color:#808080\">Image 3 : Delta lakehouse by Databriks<\/p>\n\n\n\n<p><strong>Dremio:<\/strong> Product offering based on Apache Iceberg. Unlike Databricks, Dremio can work both on cloud as well as on-premise. Unlike Databrick platform, Dremio does not provide bult-in machine learning or data science capabilities as the focus is mainly on data engineering, data warehousing and fast query performance. With high performance SQL query engine and data transfer capabilities, Dremio solves the problem of combining data lake and data warehouse. The two services that are powering Dremio platform are<\/p>\n\n\n\n<p>Dremio Sonar \u2014 A lakehouse engine built for SQLDremio Arctic \u2014 A metadata and data management service for Apache Iceberg that provides a unique Git-like experience for the lakehouse<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>Final thoughts<\/strong><\/p>\n\n\n\n<p>I have done my best to capture relevant details on each of these platforms. The ecosystem is always growing powered by more and more contributions to the open-source community. The beauty of these open-source platforms is that you can get all details on the internals and even more, you can check out the source code and start contributing. There is no limit for learning<\/p>\n\n\n\n<p class=\"has-text-color\" style=\"color:#1f8bed\"><strong>References<\/strong><\/p>\n\n\n\n<p><a href=\"https:\/\/database.guide\/what-is-acid-in-databases\/\" target=\"_blank\" rel=\"noreferrer noopener\">ACID transactions<\/a><br><a href=\"https:\/\/prestodb.io\" target=\"_blank\" rel=\"noreferrer noopener\">Apache Presto<\/a> <br><a href=\"https:\/\/drill.apache.org\" target=\"_blank\" rel=\"noreferrer noopener\">Apache Druid<\/a><br><a href=\"https:\/\/aws.amazon.com\/athena\/\" target=\"_blank\" rel=\"noreferrer noopener\">Amazon Athena<\/a><br><a href=\"https:\/\/docs.aws.amazon.com\/redshift\/latest\/dg\/c-using-spectrum.html\" target=\"_blank\" rel=\"noreferrer noopener\">Amazon Reshift Spectrum<\/a> <br><a href=\"https:\/\/cloud.google.com\/bigquery\/\" target=\"_blank\" rel=\"noreferrer noopener\">Google BigQuery <\/a><br><a href=\"https:\/\/delta.io\" target=\"_blank\" rel=\"noreferrer noopener\">Delta lake<\/a> <br><a href=\"https:\/\/iceberg.apache.org\" target=\"_blank\" rel=\"noreferrer noopener\">Apache Iceberg<\/a><br><a href=\"https:\/\/hudi.apache.org\" target=\"_blank\" rel=\"noreferrer noopener\">Apache Hudi <\/a><br><a href=\"https:\/\/medium.com\/tech-blogs-by-nest-digital\/lakehouse-new-kid-in-data-town-acb3b3a944e0\" target=\"_blank\" rel=\"noreferrer noopener\">Databricks lakehouse<\/a> <br><a href=\"https:\/\/www.dremio.com\" target=\"_blank\" rel=\"noreferrer noopener\">Dremio<\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>A brief look at one of the latest architecture paradigms in the data analytics space<\/p>\n","protected":false},"author":2,"featured_media":4476,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"inline_featured_image":false,"footnotes":"","wds_primary_category":16},"categories":[16],"tags":[36],"blocksy_meta":"","_links":{"self":[{"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/posts\/2640"}],"collection":[{"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/comments?post=2640"}],"version-history":[{"count":0,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/posts\/2640\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/media\/4476"}],"wp:attachment":[{"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/media?parent=2640"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/categories?post=2640"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/nestdigital.com\/wp-json\/wp\/v2\/tags?post=2640"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}